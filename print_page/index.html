
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3">
      
      
        <meta name="author" content="Christopher Bienko (cdbienko@us.ibm.com)">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.1">
    
    
      
        <title>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed Level 3 Lab Guide - IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3" class="md-header__button md-logo" aria-label="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              IBM watsonx Code Assistant for Red Hat Ansible Lightspeed Level 3 Lab Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3" class="md-nav__button md-logo" aria-label="IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../evaluation/" class="md-nav__link">
        Evaluation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        Setup and Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../generating/" class="md-nav__link">
        Generating Code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../source-matching-post-processing/" class="md-nav__link">
        Content Source Matching and Post-Processing
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../customizing/" class="md-nav__link">
        Task Description Tuning and Model Customization
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation" class="md-nav__link">
    Evaluation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup and Troubleshooting
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#generating" class="md-nav__link">
    Generating Code
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#source-matching-post-processing" class="md-nav__link">
    Content Source Matching and Post-Processing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#customizing" class="md-nav__link">
    Task Description Tuning and Model Customization
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<div id="print-site-page" class="">
        <section id="print-site-cover-page">
            
<div>

    
        <h1>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3</h1>
    

</div>


<table>

    
    <tr>
        <td>Description</td>
        <td>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed - Technical Sales Level 3</td>
    </tr>
    

    
    <tr>
        <td>Author(s)</td>
        <td>Christopher Bienko (cdbienko@us.ibm.com)</td>
    </tr>
    

    

    
    <tr>
        <td>Copyright</td>
        <td>Copyright &copy; 2023-2024 IBM</td>
    </tr>
    

</table>





        </section>
        <section class="print-page" id="index"><h1 id="index-_1"></h1>
<p><div class="video-container"><video style="position: relative; width: 100%; height: 22.172vw" controls  ><source src="_videos/2024-introduction.mp4" type="video/mp4" /></video></div></p>
<div class="admonition quote">
<p>Christopher Bienko <em>(Principal, IBM Global Sales Enablement)</em> introduces IBM watsonx Code Assistant's generative AI capabilities and lays the groundwork for the hands-on training that will follow. <em><a href="https://ibm.seismic.com/Link/Content/DCVqVqhdqbCbR8FMBpdX36JXGdT3" target="_blank">[6 min]</a></em></p>
</div>
<p><br/></p>
<h2 id="index-i-automation-is-indispensable-to-modern-it-strategy"><strong>i. Automation is indispensable to modern IT strategy</strong></h2>
<p>Despite the innovations and advancements made in the domain of automation, IBM sellers and partners know first-hand from discussions with clients that many businesses are still struggling to keep up with their IT operations.</p>
<p>The rapid pace of technological innovation— in particular, areas such as AI and machine learning —are obviously challenging for any organization to strategize and plan around. But smaller, more practical challenges also stand in the way of these businesses. The fact remains that IT operations, and wrangling those operations in an efficient and streamlined manner, remains a difficult problem to solve.</p>
<p>Three primary pain points that IBM consistently hears from the marketplace include: an ever-increasing skills gap in IT management; that Day 2 operations continue to be labor-intensive, mostly manual endeavors; and that the complexity of the systems needing to be managed are out-pacing many organization’s ability to adapt.</p>
<p>All of these pain points are potential automation challenges to be solved. Each of them impedes a company's ability to move quickly and adapt for the future. And as such, for many IBM clients, solving these automation challenges have become an indispensable element in their strategy to modernize IT.</p>
<div class="admonition note">
<p class="admonition-title">UNPRECEDENTED RATE OF <strong>GENERATIVE AI</strong> ADOPTION</p>
<p>Even though generative AI is relatively new, the widespread popularity of ChatGPT has created significant interest in the notion of large language models (LLMs) and foundation models (FMs) — and what they can do for business. It took quite some time for enterprises to start moving toward traditional AI.</p>
<p>In contrast, generative AI has experienced massive early adoption: 80% of enterprises are already working with, or planning to leverage FMs, and plan to adopt generative AI in their use cases and workflow. Moreover, the following data points to an ever-growing adoption trend for generative AI:</p>
<ul>
<li>
<p><code>Scale Zeitgeist 2023 AI Readiness Report</code> notes that with the companies they reviewed, 21% have generative AI models in production; 29% are experimenting with generative AI and another 31% are planning to work with generative AI models; a total of 81% are either working with or planning to work with generative AI models </p>
</li>
<li>
<p><code>Goldman Sachs</code> has estimated that generative AI will have a very deep economic impact – raising global Gross Domestic Product (GDP) by 7% within 10 years, reflecting the technology’s huge potential.</p>
</li>
<li>
<p><code>Boston Consulting Group (BCG)</code> noted that generative AI is expected to represent 30% of the overall market by 2025</p>
</li>
</ul>
</div>
<p><br/></p>
<h2 id="index-ii-generative-ai-assisted-code-lifecycle-management-achieves-what-llms-alone-cannot"><strong>ii. Generative AI-assisted code lifecycle management achieves what LLMs alone cannot</strong></h2>
<p>Following the debut of OpenAI's ChatGPT, the marketplace has been awash with competing large language model (LLM) and generative AI-based assistants. It's one thing to train and deploy an LLM; it's another thing entirely to make it applicable and tangibly beneficial for business.</p>
<p>What separates IBM watsonx Code Assistant (WCA) offerings from competing vendors in the marketplace? The design and implementation of WCA is purposely built to assist, using generative AI, software and code lifecycle management.</p>
<p>In short, generative AI-assisted code lifecycle management helps to achieve what large language models cannot achieve on their own. It is what distinguished WCA from other code assistants in the marketplace today.</p>
<p><a class="glightbox" href="../_attachments/Intro-Update-4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/Intro-Update-4.png" /></a></p>
<div class="admonition quote">
<ol>
<li>
<p>Code lifecycle management begins with <strong>understanding</strong> client code, through training across a myriad of programming languages and specializations in paradigms such as Ansible Automation Platform, and applies that understanding across a client’s application and runtime environments.</p>
</li>
<li>
<p>Users are able to <strong>plan</strong> next steps based on generative AI analysis of their existing application code.</p>
</li>
<li>
<p>Operations teams can rapidly <strong>transform</strong> their codebases with optimized design and architecture that is recommended according to IBM Granite's best-practice models. </p>
</li>
<li>
<p>Administrators can <strong>validate</strong> the outcomes with automatically generated unit tests.</p>
</li>
<li>
<p>Afterwards, they can <strong>deploy</strong> those services and applications using automated processes like Ansible's automation engine.</p>
</li>
<li>
<p>Over the course of that application or code's lifecycle, generative AI can <strong>maintain</strong> healthy operations with runtime insights.</p>
</li>
</ol>
</div>
<p><br/></p>
<h2 id="index-iii-introducing-the-ibm-watsonx-code-assistant-product-family"><strong>iii. Introducing the IBM watsonx Code Assistant product family</strong></h2>
<p>IBM watsonx Code Assistant is the flagship offering in a suite of generative AI code assistant products, which also include offerings for Ansible Automation Platform (IBM watsonx Code Assistant for Red Hat Ansible Lightspeed) and IBM Systems modernization (IBM watsonx Code Assistant for Z).</p>
<p>These solutions accelerate software development tasks with AI-powered capabilities including context-aware code generation, explanation, documentation, translation, and unit test generation. It does so while maintaining the principles of trust, security, and compliance with regards to IBM client's data and intellectual property. Developers and IT Operators can utilize WCA to speed up application modernization efforts and generate Ansible-based automation jobs to rapidly scale out (or scale up) IT environments.</p>
<hr />
<p><a class="glightbox" href="../_attachments/Intro-Update-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/Intro-Update-1.png" /></a></p>
<hr />
<p>IBM watsonx Code Assistant products are powered by <strong>IBM Granite</strong> foundation models that include state-of-the-art large language models designed for code. For offerings such as WCA for Ansible Lightspeed and WCA for Z, bespoke code models— tailored to working with Ansible Automation Platform and COBOL-to-Z use cases, respectively —are invoked. Universally true for all of the watsonx Code Assistant offerings is that they are geared towards helping IT teams create high-quality code using AI-generated recommendations, based on natural language requests or existing source code. These AI models, and the recommendations they generate, are seamlessly integrated via extensions with the world's most popular developer integrated development environments (IDE), including Visual Studio Code and Eclipse.</p>
<p>Granite is IBM’s flagship brand of open and proprietary LLMs, spanning multiple modalities. Granite models exist for code, languages, time series, and GeoSpatial — with additional modalities expected in future. </p>
<hr />
<p><a class="glightbox" href="../_attachments/Intro-Update-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/Intro-Update-3.png" /></a></p>
<hr />
<p>IBM Granite code models are a series of decoder-only models for code generative tasks, trained with code written in 116 different programming languages. The Granite code models family consists of models ranging in size from 3 to 34 billion parameters, in both a base model and instruction-following model variants. These models have a range of uses, from complex application modernization tasks to on-device memory-constrained use cases.</p>
<p>The larger the block size for a particular language on this chart, the larger percentage of training corpus data of that language was used to train the Granite code model. Languages and formats such as Java, C, JSON, JavaScript, HTML, and PHP are subjects in which the model “Majors” and excels. Other languages such as Ruby, SQL, and Swift could be considered “Minors” where the generalized code model can work with the language, but has less training data to base those recommendations on. These percentages and training data volumes will continue to evolve as the Granite code models mature.</p>
<div class="admonition note">
<p class="admonition-title">WATSONX CODE ASSISTANT vs. WCA FOR ANSIBLE LIGHTSPEED?</p>
<p>For those familiar with other IBM watsonx Code Assistant offerings— such as WCA for Red Hat Ansible Lightspeed and WCA for Z —the generalized code model approach, as seen here, differs from the specialized code model approach of those two aforementioned offerings.</p>
<ul>
<li>
<p>The <strong>WCA for Ansible Lightspeed</strong> flavor of IBM Granite code models specializes (Majors) only in Ansible Playbooks and YAML</p>
</li>
<li>
<p>Similarly, the IBM Granite code model used by <strong>WCA for Z</strong> specializes in transforming COBOL mainframe code into modernized Java code</p>
</li>
</ul>
<p>Ansible Playbooks (YAML) and mainframe (COBOL) code are both supported (Minor) languages for the generalized IBM Granite code models— and therefore are supported by IBM watsonx Code Assistant —but if a client wishes to specialize in those particular languages and frameworks, they would be well advised to utilize the bespoke <em>WCA for Ansible Lightspeed</em> and <em>WCA for Z</em> offerings, respectively, to do so.</p>
</div>
<p><br/></p>
<h2 id="index-iv-solution-architecture-of-ibm-watsonx-code-assistant-for-red-hat-ansible-lightspeed"><strong>iv. Solution architecture of IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</strong></h2>
<p><strong>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</strong> meets developers where they are: with a rich plugin via VS Code extensions, where developers input their prompts directly in the code editor. Prompts are sent to the Ansible Lightspeed service, and the service sends a suggestion back (a <em>completion</em>) that’s powered by IBM Granite LLMs for code. </p>
<p>It is important to note that all data in transit is encrypted and ephemeral so users can be confident and have trust in the security of the service during this exchange. In terms of data security, client Ansible playbooks and customized models that they may potentially have are stored in client-owned Cloud Object Storage and are not shared with IBM, Red Hat, or any other clients.</p>
<p><a class="glightbox" href="../_attachments/Intro-Update-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/Intro-Update-2.png" /></a></p>
<div class="admonition quote">
<p>In order to utilize IBM watsonx Code Assistant for Red Hat Ansible Lightspeed, a client must have an existing license for Red Hat Ansible Automation Platform (the ”red tile” component in the center of the diagram), as well as a license for IBM watsonx Code Assistant for Red Hat Ansible Lightspeed (the “blue tile” on the right of the diagram).</p>
</div>
<p><br/></p>
<p>Generative AI has recently demonstrated proficiency in creating syntactically correct and contextually relevant application code in a variety of programming languages. For example, if trained on a large dataset of Ansible Playbooks, generative AI models can be fine-tuned to understand the nuances of Playbook syntax and structure. An enterprise organization with dozens or hundreds of Playbooks within their IT estate today would have a rich corpus of training data on-hand that could be used to fine-tune AI models that are tailored to the automation needs and programming style or standards of that particular company. </p>
<div class="admonition note">
<p class="admonition-title">WHAT ARE PLAYBOOKS?</p>
<p>Ansible Playbooks instruct Ansible’s automation engine on how to execute tasks in a step-by-step manner. Playbooks defines roles, tasks, handlers, and other configurations; in turn, these attributes allow developers and users to codify complex orchestration scenarios. Conceptually, think of a Playbook as a recipe book for system administration: each recipe (or Playbook) spells out the steps required to achieve a particular system state or to complete a given operation.</p>
<p>One of the standout features of Ansible Playbooks is that they are <em>idempotent</em>: executing Playbooks multiple times on the same system won't create additional "side effects" (unintended operations or creation of unwanted artifacts) after the first successful run. This ensures consistency and reliability across deployments of the Red Hat Ansible Automation Platform (<strong>AAP</strong>).</p>
</div>
<p>As you will see throughout the hands-on training material, generative AI models provide a natural language prompt to users which in turn is understood and translated by the AI models into the necessary Ansible Task code. For example, a user might describe a desired system state in plain language (<em>"I want a Playbook to install and start an Apache web server"</em>) and the model will generate the appropriate Ansible Tasks for a Playbook.</p>
<p>All of this is achieved without physically writing code or requiring much programming expertise. Not only does this speed up the automation process by cutting the time needed to author Playbooks, but it also democratizes access to automation in general. Even those within a company with limited Ansible or programming expertise will be able to produce effective Playbooks. There are plenty of caveats of course, and thorough validation and testing of AI-generated code will be needed before being put into production. However, the productivity gains and broadening of skillsets within an organization can be tremendous. And as a whole, generative AI brings the original goals of Red Hat Ansible Automation Platform (the democratization of automation for everything) that much closer to a reality.</p>
<hr />
<h2 id="index-v-lab-objectives"><strong>v. Lab objectives</strong></h2>
<p>The material covered for this hands-on training is intended to prepare IBM sellers and business partners with the skills necessary to create Ansible automation tasks using the generative AI capabilities of WCA. The curriculum will leverage WCA's generative AI code recommendations for automating cloud-based and infrastructure-based automation tasks. In-depth explanations accompanying Ansible Playbook templates will also explain:</p>
<ul>
<li>
<p>How WCA uses <strong>natural language prompts</strong>, as well as Ansible Playbook contents, to generate contextually-aware Task code recommendations</p>
</li>
<li>
<p><strong>Post-processing</strong> capabilities that refine the generative AI suggestions into syntactically correct code (adherent to best practices)</p>
</li>
<li>
<p>How WCA provides <strong>content source matching</strong> attribution and "explainability" for all AI-generated content</p>
</li>
<li>
<p>Leveraging WCA's <strong>model tuning</strong> capabilities to tailor content and code recommendations to an organization's standards, best practices, and programming styles</p>
</li>
</ul>
<hr />
<h2 id="index-vi-next-steps"><strong>vi. Next steps</strong></h2>
<p>The module ahead will outline the evaluation criteria for IBM sellers and business partners. Afterwards, you will setup your local environment with the necessary pre-requisites for getting started with the hands-on material.</p></section><section class="print-page" id="evaluation"><h1 id="evaluation-_1"></h1>
<h2 id="evaluation-i-evaluation-criteria-for-ibm-technical-sellers-and-business-partners"><strong>i. Evaluation Criteria for IBM Technical Sellers and Business Partners</strong></h2>
<p>To receive the Level 3 badge (<em>Generative AI for Code with watsonx Code Assistant Technical Sales Intermediate</em>), IBMers and Business Partners must demonstrate mastery of the skills learned throughout the various modules of these hands-on labs and coursework. Level 3 skills requirements— and the way participants will be evaluated —differs depending on job role.</p>
<div class="admonition note">
<p class="admonition-title">IBM TECHNICAL SELLERS<p>IBM Sales and Tech Sales must develop and record a <strong>Stand &amp; Deliver</strong> presentation, which will be uploaded to the IBM Stand &amp; Deliver platform for evaluation. This video is intended to simulate your delivery of a “live” demo in front of a client — on camera.</p>
<p>IBMers will have flexibility in defining a hypothetical client, the pain points that customer has, and the goals they aspire to. The recording will then cover the seller’s hands-on demonstration and pitch to the client of the value of the IBM solution using the environments and techniques of this lab.</p>
</p>
</div>
<div class="admonition tip">
<p class="admonition-title">BUSINESS PARTNERS<p>Business partners must pass a <strong>skills evaluation quiz</strong> after completing the hands-on portion of the course. The quiz consists of multiple choice questions, with four possible responses (and only one correct answer) for each question. Participants must pass the quiz with a grade of 80% or higher.</p>
<p>The quiz questions will ask you about on-screen text or descriptions that come up as you work through the lab guide. Answers to quiz questions can only be determined by carefully following the instructions of the hands-on lab.</p>
</p>
</div>
<hr />
<h2 id="evaluation-ii-ibmer-stand-deliver-assessment"><strong>ii. <em>IBMer</em> Stand &amp; Deliver Assessment</strong></h2>
<hr />
<div class="admonition warning">
<p class="admonition-title">IBMers — SUBMIT RECORDINGS HERE<p><strong><a href="https://yourlearning.ibm.com/activity/ISND-SALESENABLEMENT-2310181600?planId=PLAN-916714E00137&sectionId=SECTION-A&planIdFromParentTab=PLAN-916714E00137&sectionIdFromParentTab=SECTION-A&planIdForChildTab=PLAN-916714E00137" target="_blank">Submit your Stand &amp; Deliver recording online using IBM YourLearning.</a></strong></p>
<p>Hands-on demonstrations of IBM watsonx Code Assistant for Red Hat Ansible Lightspeed are available on Seismic, as well as embedded within the various modules of this documentation. The authors highly recommend tailoring the Stand &amp; Deliver to your own presentation style and expertise. Captivating and delighting clients with your unique delivery is paramount!</p>
<ul>
<li><a href="https://ibm.seismic.com/Link/Content/DCVqVqhdqbCbR8FMBpdX36JXGdT3" target="_blank">Introduction</a> <em>[6 min]</em></li>
<li><a href="https://ibm.seismic.com/Link/Content/DCD9HcG7pfXd9GhBDWQJVgM47J4V" target="_blank">Generating Code</a> <em>[10 min]</em></li>
<li><a href="https://ibm.seismic.com/Link/Content/DCFFHTXJjcj7T8WGHDMRMchGTB33" target="_blank">Content Source Matching and Post-Processing</a> <em>[10 min]</em></li>
<li><a href="https://ibm.seismic.com/Link/Content/DC3jTJ8DXqj32GfHc4PfBDgWFgGB" target="_blank">Task Description Tuning and Model Customization</a> <em>[15 min]</em></li>
<li><a href="https://ibm.seismic.com/Link/Content/DCjbhpDR24F3qG4QRRCqjWd23gTB" target="_blank">Stand &amp; Deliver with Paul Zikopoulos</a> <em>[8 min]</em></li>
</ul>
</p>
</div>
<p>The evaluation criteria described below <strong>only applies to IBMers</strong>, who must record a Stand &amp; Deliver to receive credit for this Level 3 course. By default, IBMers will be evaluated by their First Line Manager (FLM) — although they may request another manager to evaluate their Stand &amp; Deliver, if appropriate. Instructions on how to submit a Stand &amp; Deliver are included within the activity on YourLearning.</p>
<p>IBM Technical Sellers need to include <strong>all</strong> six of the following elements in their Stand &amp; Deliver recording to receive a Level 3 badge:</p>
<ol>
<li>
<p>Seller articulated their client's pain point(s) and the value proposition of using <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em>.</p>
</li>
<li>
<p>Seller highlighted use cases for <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em>.</p>
</li>
<li>
<p>Seller demonstrated and discussed several of the key differentiated capabilities of <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em> that deliver on the value proposition on point one.</p>
</li>
<li>
<p>Seller highlighted benefits to their client (this is the why the client can’t live without these benefits section).</p>
</li>
<li>
<p>Seller highlighted benefits to their client's customers (what will the client be able to deliver to their customers that they could not without this product).</p>
</li>
<li>
<p>Seller closed the demonstration with a call to action for their client that could include: a workshop, a deeper dive into the product meeting, or a Proof of Experience (PoX).</p>
</li>
</ol>
<hr />
<h2 id="evaluation-iii-business-partner-quiz-assessment"><strong>iii. <em>Business Partner</em> Quiz Assessment</strong></h2>
<hr />
<div class="admonition warning">
<p class="admonition-title">PARTNERS — COMPLETE ASSESSMENT HERE<p>Complete your assessment online using IBM Training:</p>
<p><a href="https://learn.ibm.com/mod/subcourse/view.php?id=284786" target="_blank">https://learn.ibm.com/mod/subcourse/view.php?id=284786</a></p>
</p>
</div>
<p>The skills evaluation quiz <strong>only applies to business partners</strong> – IBMers must record a <a href="https://ibm.github.io/WCA-AnsibleLightspeed-L3/evaluation/#ibmer-stand-deliver-assessment" target="_blank">Stand &amp; Deliver</a>. The quiz consists of multiple choice questions, with four possible responses (and only one correct answer) for each question. The quiz questions will ask you about on-screen text or descriptions that come up as you work through the lab guide. Participants must pass the quiz with a grade of 80% or higher.</p>
<p>Answers to the quiz can only be determined by carefully following the instructions of the hands-on lab.</p>
<hr />
<h2 id="evaluation-iv-next-steps"><strong>iv. Next steps</strong></h2>
<p>In the following section, you will prepare your hands-on lab environment with the necessary services and configurations.</p></section><section class="print-page" id="setup"><h1 id="setup-_1"></h1>
<div class="admonition note">
<p>If you require assistance or run into issues with the hands-on lab, help is available.</p>
<ul>
<li>
<p><strong>Environment issues:</strong> The lab environment is managed by IBM Technology Zone. <a href="https://techzone.ibm.com/help" target="_blank">Opening a support case ticket</a> is recommended for issues related to the hands-on environment (provisioning, running, and so on.)</p>
</li>
<li>
<p><strong>Documentation issues:</strong> If there is an error in the lab documentation, or if you require additional support in completing the material, open a thread on the <a href="https://ibm.enterprise.slack.com/archives/C063VF1G54J" target="_blank">#wca-ansible-techzone-support</a> Slack channel.</p>
</li>
<li>
<p><strong>Product questions:</strong> For questions related to IBM watsonx Code Assistant capabilities, sales opportunities, roadmap, and other such matters, open a thread on the <a href="https://ibm.enterprise.slack.com/archives/C059NKPUCP9" target="_blank">#watsonx-code-assistant</a> Slack channel.</p>
</li>
</ul>
<p>Frequently asked questions and troubleshooting steps are <a href="https://ibm.github.io/WCA-AnsibleLightspeed-L3/setup/#troubleshooting-and-support" target="_blank">documented below</a>.</p>
</div>
<h2 id="setup-i-reserving-the-lab-environments"><strong>i. Reserving the lab environments</strong></h2>
<p>Before getting started with <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em> (<strong>WCA</strong>), an environment must be reserved and deployed via the <em>IBM Technology Zone</em> (<strong>ITZ</strong>).</p>
<p>You will require access to the ITZ in order to reserve your environment and complete the lab. If you do not yet have access or an account with the ITZ, <a href="https://techzone.ibm.com/" target="_blank">you will need to register for one</a>.</p>
<p>There are <strong>TWO</strong> environments that you must reserve from ITZ:</p>
<ul>
<li>
<p><code>Request a Red Hat Account</code>: responsible for generating unique access credentials for <em>IBM watsonx Code Assistant</em> and <em>Red Hat Ansible Lightspeed</em> authorizations</p>
</li>
<li>
<p><code>WCA for Ansible Essentials Plan - Visual Studio Desktop 1.5</code>: virtualized machine prepared with Visual Studio Code and lab demonstration scripts pre-installed; you will authenticate within this environment using the Red Hat account requested from ITZ</p>
</li>
</ul>
<p>Follow along with the instructions below to request and configure these environments.</p>
<hr />
<ol>
<li>
<p>Click the IBM Technology Zone link below. Locate the <strong>Request a Red Hat Account</strong> tile, hover over the <strong>IBM Cloud environment</strong> button with your cursor, and then click <strong>Reserve it</strong><sup>[A]</sup>:</p>
<div class="admonition warning">
<p><strong>URL:</strong> <a href="https://techzone.ibm.com/collection/ibm-watson-x-code-assistant-for-ansible-lightspeed/environments" target="_blank">https://techzone.ibm.com/collection/ibm-watson-x-code-assistant-for-ansible-lightspeed/environments</a></p>
</div>
<p><br/></p>
<div class="admonition note inline end">
<p class="admonition-title">FULLSCREEN IMAGES</p>
<p>Click on any of the screenshots within this documentation to enlarge the image.</p>
</div>
<p><a class="glightbox" href="../_attachments/setupAAP-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupAAP-1.png" width="450" /></a></p>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>From the <em>Single environment reservation options</em>, select <strong>Reserve now</strong><sup>[A]</sup>.</p>
<p><br/>
<a class="glightbox" href="../_attachments/setup2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setup2.png" width="600" /></a></p>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>Supply additional details about your ITZ reservation request:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Name</code></td>
<td>Give your reservation a unique name.</td>
</tr>
<tr>
<td><code>Purpose</code></td>
<td>If reserving for L3 training, select <em>Education</em>. If delivering a PoC, select <em>Pilot</em> and provide a Sales Opportunity number.</td>
</tr>
<tr>
<td><code>Describe</code></td>
<td>If reserving for L3, enter <em>WCA for Ansible Lightspeed training</em>. If delivering a PoC, enter the PoC and client details.</td>
</tr>
<tr>
<td><code>Preferred Geography</code></td>
<td>Select the region and data center geographically closest to your location.</td>
</tr>
<tr>
<td><code>End Date and Time</code></td>
<td>Select a time and date for when the reservation will expire.</td>
</tr>
</tbody>
</table>
<p>When satisfied, verify that you agree to the <em>Terms and Conditions</em> for the environment and finalize your reservation request by clicking <strong>Submit</strong>.</p>
<div class="admonition note">
<p class="admonition-title">PROVISIONING TIMES</p>
<p>Red Hat account creation take approximately <strong>5-10 minutes</strong> to complete from the time that you click submit. If you navigate to the <strong><a href="https://techzone.ibm.com/my/reservations" target="_blank">My Reservations</a></strong> tab of the ITZ, you can monitor the progress of your reservation. Wait for the ITZ reservation to be marked as <em>"Ready"</em> before attempting to start the lab.</p>
</div>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>When the Red Hat account request has been processed by IBM Technology Zone, you will receive a <strong>pair</strong> of emails: one from ITZ and a second from Red Hat.</p>
<ul>
<li>
<p><code>Reservation Ready on IBM Technology Zone</code> : You can ignore the contents of this email, as the relevant account and licensing information are contained in the Red Hat email. Confirm that the ITZ email states that <strong>Status Update: Ready</strong><sup>[A]</sup>.</p>
</li>
<li>
<p><code>Red Hat Login Email Verification</code> : This email, addressed from a <code>no-reply@redhat.com</code> account<sup>[B]</sup>, contains the resources necessary for accessing your uniquely-generated Red Hat credentials. The lab guide steps that follow will instruct you on how to set those up and how to use them for accessing your <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em> entitlements inside VS Code.</p>
<p><br/>
<a class="glightbox" href="../_attachments/setupAAP-4a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupAAP-4a.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/setupAAP-4b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupAAP-4b.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>With the <code>Red Hat Login Email Verification</code> email open, take note of two essential pieces of information:</p>
<ul>
<li>
<p>Locate the <strong>Account Information</strong><sup>[A]</sup> details at the bottom of the email. <code>Your login:</code> is the unique Red Hat account assigned for you by ITZ. <code>Your email address:</code> will be the address associated with your ITZ account. <strong>Record</strong> both to a notepad for reference later.</p>
</li>
<li>
<p>Click the <strong>URL</strong><sup>[B]</sup> located within the body of the invitation email to finalize your account registration with Red Hat.</p>
<p><br/>
<a class="glightbox" href="../_attachments/setupAAP-5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupAAP-5.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>An <em>Email Confirmation</em> page will load within your web browser.</p>
<ul>
<li>
<p>Note that the value of <code>Red Hat login</code> is the same as the one recorded in <em>Step 5</em></p>
</li>
<li>
<p><strong>Create</strong> a new <code>Password</code><sup>[A]</sup> and record this to a notepad for reference later</p>
</li>
<li>
<p>When ready, click <strong>Save</strong><sup>[B]</sup> to finalize registration</p>
<p><br/>
<a class="glightbox" href="../_attachments/setuptroubleshoot-6b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-6b.png" width="600" /></a></p>
<div class="admonition note">
<p class="admonition-title">REGISTRATION IS REQUIRED</p>
<ul>
<li>
<p>If you already have a personal account with Red Hat, <strong>you must still register for a new account</strong> using the invitation URL provided</p>
</li>
<li>
<p><strong>Do not</strong> attempt to use a personal Red Hat account in the later steps of the <em>Setup &amp; Troubleshooting</em> guide, as that account will not have access to the WCA services needed to perform the training</p>
</li>
<li>
<p>Red Hat accounts created for this training will automatically be de-authorized and deleted by IBM Technology Zone after the reservation period has ended</p>
</li>
</ul>
</div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>Now you must request your second ITZ environment, this time for the virtualized machine (VM) environment. <strong>Open</strong> the IBM Technology Zone reservation link below:</p>
<div class="admonition warning">
<p><strong>URL:</strong> <a href="https://techzone.ibm.com/collection/ibm-watson-x-code-assistant-for-ansible-lightspeed/environments" target="_blank">https://techzone.ibm.com/collection/ibm-watson-x-code-assistant-for-ansible-lightspeed/environments</a></p>
</div>
<ul>
<li>
<p>Locate the <strong>WCA for Ansible Essentials Plan: Visual Studio Desktop 1.5</strong> tile</p>
</li>
<li>
<p>Hover over the <strong>IBM Cloud environment</strong> button with your cursor</p>
</li>
<li>
<p>Click <strong>Reserve it</strong><sup>[A]</sup> to continue</p>
<p><br/>
<a class="glightbox" href="../_attachments/newvm-setup-step7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/newvm-setup-step7.png" width="450" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="8">
<li>From the <em>Single environment reservation options</em>, select <strong>Reserve now</strong>.</li>
</ol>
<hr />
<ol start="9">
<li>
<p>Supply additional details about your ITZ reservation request:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Name</code></td>
<td>Give your reservation a unique name.</td>
</tr>
<tr>
<td><code>Purpose</code></td>
<td>If reserving for L3 training, select <em>Education</em>. If delivering a PoC, select <em>Pilot</em> and provide a Sales Opportunity number.</td>
</tr>
<tr>
<td><code>Describe</code></td>
<td>If reserving for L3, enter <em>WCA for Ansible Lightspeed training</em>. If delivering a PoC, enter the PoC and client details.</td>
</tr>
<tr>
<td><code>Preferred Geography</code></td>
<td>Select the region and data center geographically closest to your location.</td>
</tr>
<tr>
<td><code>Customer Data</code></td>
<td>Select <em>No, I will not be using customer data</em> if using for education purposes.</td>
</tr>
<tr>
<td><code>End Date and Time</code></td>
<td>Select a time and date for when the reservation will expire.</td>
</tr>
<tr>
<td><code>VPN Access</code></td>
<td>Set to <em>Disabled</em>.</td>
</tr>
</tbody>
</table>
<p>When satisfied, verify that you agree to the <em>Terms and Conditions</em> for the environment and finalize your reservation request by clicking <strong>Submit</strong>.</p>
<div class="admonition note">
<p class="admonition-title">PROVISIONING TIMES</p>
<p>Red Hat account creation take approximately <strong>15-30 minutes</strong> to complete from the time that you click submit. If you navigate to the <strong><a href="https://techzone.ibm.com/my/reservations" target="_blank">My Reservations</a></strong> tab of the ITZ, you can monitor the progress of your reservation. Wait for the ITZ reservation to be marked as <em>"Ready"</em> before attempting to start the lab.</p>
</div>
</li>
</ol>
<hr />
<h2 id="setup-ii-accessing-the-vm"><strong>ii. Accessing the VM</strong></h2>
<ol start="10">
<li>
<p>Once the ITZ reservation has been marked as <em>"Ready"</em>, access connection details for the environment by either clicking the shortcut in the ITZ email or by drilling down into the <strong>My Reservations</strong> tab<sup>[A]</sup> on the ITZ web portal.</p>
<p><br/>
    <a class="glightbox" href="../_attachments/newvm-setup-step10.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/newvm-setup-step10.png" width="400" /></a></p>
</li>
</ol>
<hr />
<ol start="11">
<li>
<p>Scroll down to the bottom of the reservation page and click the blue <strong>VM Remote Console</strong> button<sup>[A]</sup> to launch the VM interface.</p>
<p><br/>
<a class="glightbox" href="../_attachments/newvm-setup-step11.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/newvm-setup-step11.png" width="400" /></a></p>
</li>
</ol>
<hr />
<ol start="12">
<li>
<p>Select the <code>techzone-vm</code><sup>[A]</sup> login when prompted.</p>
<ul>
<li>
<p>Supply the following for the password:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#setup-__codelineno-0-1"></a>IBMDem0s!
</code></pre></div>
</li>
<li>
<p>Hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to complete the VM login</p>
<p><br/>
<a class="glightbox" href="../_attachments/client-setup2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/client-setup2.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p>Once you have successfully authenticated, click the <strong>Activities</strong><sup>[A]</sup> button in the top-left corner of the interface to pull open the list of available applications from the bottom of the screen.</p>
<ul>
<li>
<p>Click the <strong>Visual Studio Code</strong><sup>[B]</sup> application shortcut at the bottom of the desktop to start up the service.</p>
</li>
<li>
<p>If you wish to copy and paste instructions directly from the lab documentation into the virtual machine (VM), it is recommended that you open the GitHub instructions <strong>inside</strong> the VM's web browser (Firefox). This will allow you to copy instructions to the VM's clipboard and paste instructions inside the VS Code editor.</p>
</li>
<li>
<p>You may access the web browser at any time by clicking the <strong>Activities</strong><sup>[A]</sup> button and then launching <strong>Firefox</strong><sup>[C]</sup>, as shown.</p>
<p><br/>
<a class="glightbox" href="../_attachments/setup8.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setup8.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="14">
<li>
<p>VS Code will load and then present you with an <em>Authentication Required</em> splash screen.</p>
<ul>
<li>
<p>Enter the same password<sup>[A]</sup> used to log into the VM:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#setup-__codelineno-1-1"></a>IBMDem0s!
</code></pre></div>
</li>
<li>
<p>Click <strong>Unlock</strong><sup>[B]</sup></p>
<p><br/>
<a class="glightbox" href="../_attachments/setup9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setup9.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="setup-iii-authorizing-vs-code-with-wca"><strong>iii. Authorizing VS Code with WCA</strong></h2>
<p>Now you must authorize the VS Code environment for use with WCA, using the Red Hat account details that were generated for you in <em>Steps 5-6</em>.</p>
<ol start="15">
<li>
<p>Within your VS Code environment click the <strong>Ansible</strong> plugin<sup>[A]</sup> (denoted by the <code>A</code> logo) on the left-hand side of the interface.</p>
<ul>
<li>
<p>Two panels will open along the left side of the interface</p>
</li>
<li>
<p>Within the <em>Ansible Lightspeed Login</em> panel, click the blue <strong>Connect</strong> button<sup>[B]</sup></p>
</li>
<li>
<p><code>The extension Ansible wants to sign in using Ansible Lightspeed</code>: click <strong>Allow</strong><sup>[C]</sup></p>
</li>
<li>
<p><code>Do you want Code to open the external website?</code>: click <strong>Open</strong><sup>[D]</sup></p>
<p><br/>
<a class="glightbox" href="../_attachments/setuptroubleshoot-7a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-7a.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/setuptroubleshoot-7b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-7b.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/setuptroubleshoot-7c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-7c.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="16">
<li>
<p>A web browser will load with the header <code>Log in to Ansible Lightspeed with IBM watsonx Code Assistant</code> — this is where you will supply your registration details recorded in <em>Step 6</em> in order to authenticate the VS Code plugin with WCA.</p>
<ul>
<li>
<p>Click the <strong>Log in with Red Hat</strong> button</p>
</li>
<li>
<p>Provide the <code>Username</code> and <code>Password</code> recorded in <em>Step 6</em> of this module</p>
</li>
<li>
<p>Click <strong>Submit</strong> to continue</p>
</li>
<li>
<p>When prompted for <strong>We need a little more information</strong>, set <strong>Job Role</strong> to <code>Student</code></p>
</li>
<li>
<p>Click the <strong>Submit</strong> button to finalize your account activation</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">COPY AND PASTE INSTRUCTIONS INTO A VIRTUAL MACHINE</p>
<p>As you are running the lab environment inside a virtual machine (VM), it is not possible to "paste" lab instructions or information from your local machine's clipboard directly into the VM.</p>
<p>If you wish to copy and paste instructions directly from the lab documentation, it is recommended that you open the GitHub instructions <strong>inside</strong> the VM's web browser (Firefox). This will allow you to copy instructions to the VM's clipboard and paste instructions inside the VS Code editor.</p>
</div>
</li>
</ol>
<hr />
<ol start="17">
<li>
<p>After logging in with Red Hat, the web browser will display the prompt to <code>Authorize Ansible Lightspeed for VS Code</code>.</p>
<ul>
<li>
<p>Click <strong>Authorize</strong><sup>[A]</sup></p>
</li>
<li>
<p><code>Allow this site to open the vscode link with Visual Studio Code - URL Handler?</code>: click <strong>Open URL</strong></p>
<p><br/>
<a class="glightbox" href="../_attachments/setuptroubleshoot-9a.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-9a.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/setuptroubleshoot-9b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-9b.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/setuptroubleshoot-9c.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-9c.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="18">
<li>
<p>At this stage, the Ansible extension for VS Code is now authenticated and connected to <em>IBM watsonx Code Assistant</em>.</p>
<ul>
<li>
<p>Verify<sup>[A]</sup> that the environment is logged in as your unique <code>Username</code> and that the <code>User Type: Licensed</code></p>
</li>
<li>
<p>A notification pop-up will also appear in the bottom-right corner of the VS Code interface confirming the successful login</p>
<p><br/>
<a class="glightbox" href="../_attachments/setuptroubleshoot-10.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-10.png" width="600" /></a></p>
<details class="warning">
<summary>CLICK TO EXPAND — FAILURE TO LOGIN OR TIMED OUT</summary>
<ul>
<li>
<p>If the authentication procedure in <em>Steps 15-17</em> takes too long, activation of the plugin will be "timed out" and the VS Code environment will display an error message<sup>[B]</sup> in the bottom-right corner</p>
</li>
<li>
<p>Click the <strong>Connect</strong><sup>[C]</sup> button as shown and repeat <em>Steps 15-17</em> as before; the login process should run smoother (and faster) on the second attempt</p>
<p><br/>
<a class="glightbox" href="../_attachments/setup26.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setup26.png" width="600" /></a></p>
</li>
</ul>
</details>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="setup-iv-optional-download-demo-assets-to-local-machine"><strong>iv. [OPTIONAL] Download demo assets to local machine</strong></h2>
<ol start="19">
<li>
<p>If you wish to complete the hands-on lab using a local installation of VS Code (instead of using the provided Virtual Machine), you may do so — but you'll need to clone (download) the accompanying demo assets first. To do so, first install the <a href="https://cli.github.com/" target="_blank">GitHub CLI</a> library.</p>
<ul>
<li>
<p>Execute the following command within a Terminal console to clone (via <code>git</code>) the supporting demo assets repository (<code>ansible-wca-demo-kit.git</code>) to your local machine:</p>
<div class="admonition warning">
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#setup-__codelineno-2-1"></a>git clone https://github.com/chetan-hireholi/ansible-wca-demo-kit
</code></pre></div>
</div>
</li>
<li>
<p>Open the local <code>ansible-wca-demo-kit</code> folder within VS Code to access the demo assets for the remaining sections of the lab</p>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="setup-v-troubleshooting-and-support"><strong>v. Troubleshooting and support</strong></h2>
<div class="admonition note">
<p>If you require assistance or run into issues with the hands-on lab, help is available.</p>
<ul>
<li>
<p><strong>Environment issues:</strong> The lab environment is managed by IBM Technology Zone. <a href="https://techzone.ibm.com/help" target="_blank">Opening a support case ticket</a> is recommended for issues related to the hands-on environment (provisioning, running, and so on.)</p>
</li>
<li>
<p><strong>Documentation issues:</strong> If there is an error in the lab documentation, or if you require additional support in completing the material, open a thread on the <a href="https://ibm.enterprise.slack.com/archives/C063VF1G54J" target="_blank">#wca-ansible-techzone-support</a> Slack channel.</p>
</li>
<li>
<p><strong>Product questions:</strong> For questions related to IBM watsonx Code Assistant capabilities, sales opportunities, roadmap, and other such matters, open a thread on the <a href="https://ibm.enterprise.slack.com/archives/C059NKPUCP9" target="_blank">#watsonx-code-assistant</a> Slack channel.</p>
</li>
</ul>
</div>
<p><br/>
As you settle in to the environment and begin your training, you may encounter unexpected warnings or errors. Many of these can be safely ignored or can be easily rectified. This section will serve as a running list of frequently asked questions and troubleshooting techniques. Click on any of the following topics for additional details.</p>
<hr />
<details class="quote">
<summary>FAILED TO CONNECT TO THE SERVER / <code>"YOU DON'T HAVE ACCESS TO IBM WATSONX..."</code></summary>
<p>This warning will occur when the Ansible plugin for VS Code needs to be re-authenticated with WCA. It can occur after an extended period of inactivity or a system restart. For example, if your lab environment is running inside a VM, pausing or restarting the VM may produce this error.</p>
<p>To re-authenticate:</p>
<ul>
<li>
<p><strong>Sign out</strong> from the <em>VS Code</em> application by clicking the User icon<sup>[A]</sup> in the bottom-left corner of the interface, hover over your username, and then click <strong>Sign Out</strong><sup>[B]</sup></p>
</li>
<li>
<p><strong>If you are running this environment inside a virtual machine (VM)</strong>, closing and restarting the VM <em>will not</em> resolve the issue — you must sign out from the <em>VS Code</em> application, not the VM</p>
</li>
<li>
<p>Once logged out, follow from <em>Step 7</em> of the <em>Setup &amp; Troubleshooting</em> to re-authenticate with WCA</p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-1.png" width="600" /></a></p>
</details>
<details class="quote">
<summary>CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
<details class="quote">
<summary><code>"ANSIBLE-LINT IS NOT AVAILABLE."</code></summary>
<p><code>ansible-lint</code> checks Playbooks for practices and behavior that could potentially be improved and can fix some of the most common ones for you. It will constantly check your Ansible syntax as you type and provide recommendations for how to improve it.</p>
<ul>
<li>
<p>You can safely <strong>ignore</strong> this error if it occurs during the lab exercises</p>
</li>
<li>
<p>If you wish to install <code>ansible-lint</code> on your local machine, execute the following instruction within a Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#setup-__codelineno-3-1"></a>python3 -m pip install --upgrade --user ansible-lint
</code></pre></div>
<p><a class="glightbox" href="../_attachments/troubleshooting-4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-4.png" width="600" /></a></p>
</li>
</ul>
</details>
<details class="quote">
<summary>RED <em>ANSIBLE</em> ICON ALONG BOTTOM-RIGHT INTERFACE</summary>
<p>The <em>Ansible</em> extension for VS Code will check your local machine to determine if Red Hat Ansible has been installed locally. If you have not set up Ansible (the standalone version) on your local machine previously, this tile will display as red.</p>
<p>You can safely <strong>ignore</strong> this error if it occurs during the lab exercises.</p>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-5.png" width="600" /></a></p>
</details>
<details class="quote">
<summary>CANNOT SET PROPERTIES OF UNDEFINED (SETTING 'currentModelValue')</summary>
<p>Make sure that the <strong>Model ID Override</strong> field is set to <code>empty</code> in your Ansible for VS Code extension settings.</p>
<p>To verify this:</p>
<ul>
<li>
<p>Click the <strong>Extensions</strong> tab<sup>[A]</sup> along the left-hand interface</p>
</li>
<li>
<p>Click the <strong>Manage</strong> icon<sup>[B]</sup> on the right side of the <em>Ansible</em> extension tile, then drill down into <strong>Extension Settings</strong><sup>[C]</sup></p>
</li>
<li>
<p>Add the text <code>Model</code> to the search filter<sup>[D]</sup> at the top of the Extension Settings panel</p>
</li>
<li>
<p>Clear the input field<sup>[E]</sup> of any model IDs and leave it blank</p>
</li>
<li>
<p>Close the Extension Settings panel by clicking <code>X</code> and return to the Ansible Playbook</p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-6.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-6.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-7.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-8.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-8.png" width="600" /></a></p>
</details>
<details class="quote">
<summary>SPAWN C:\Windows\system32\cmd.exe ENOENT</summary>
<p>This warning is not related to Ansible or WCA. You can safely <strong>ignore</strong> this error if it occurs during the lab exercises.</p>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-9.png" width="600" /></a></p>
</details>
<details class="quote">
<summary>PYTHON DRIVERS ARE MISSING</summary>
<p>The WCA extension for VS Code requires that Python drivers are included within the workspace. These are usually configured within VS Code by default, but can be easily set if necessary. Look for a <code>Python</code> tile adjacent to the <code>Ansible</code> tile along the bottom-right corner of the VS Code interface. If it is not set, <strong>click</strong> the tile and select the <code>Python 3.11.5 64-bit</code> drivers.</p>
<ul>
<li>
<p>Click the gold-colored <code>Select python environment</code> button at the bottom-right of the interface</p>
</li>
<li>
<p>From the console at the top of the VS Code environment, select the recommended <code>Python 3.11.5 64-bit</code> option and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to confirm</p>
<p><br/>
<a class="glightbox" href="../_attachments/figure44.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure44.png" width="300" /></a></p>
<p><a class="glightbox" href="../_attachments/figure45.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure45.png" width="300" /></a></p>
</li>
</ul>
</details>
<details class="quote">
<summary>GIT NOT INSTALLED</summary>
<p>If your machine has not used <strong><a href="https://git-scm.com" target="_blank">Git</a></strong> previously, you may be prompted by VS Code to install it before attempting a <code>clone</code> request. This is more commonplace on Windows operating systems, but some MacOS users may need to install Git as well. The following instructions will guide you through the process:</p>
<ul>
<li>
<p>With the VS Code application open, click the <strong>Source Control</strong><sup>[A]</sup> tab from the left-hand interface and then click <strong>Download Git</strong><sup>[B]</sup>.</p>
</li>
<li>
<p>A web browser will open to the <a href="https://git-scm.com" target="_blank">git-scm.com</a> Downloads page. </p>
<ul>
<li>
<p><strong>Download</strong><sup>[C]</sup> the version recommended for your machine's particular operating system.</p>
</li>
<li>
<p>The recommended version will be displayed first at the top of the list. </p>
</li>
<li>
<p>Execute the installer on your machine and follow along with the prompts to finish installing Git. Accept the license agreement and accept the default values on each page.</p>
</li>
</ul>
</li>
<li>
<p>Return to VS Code and once again click the <strong>Source Control</strong><sup>[D]</sup> tab, then click the blue <strong>Initialize Repository</strong><sup>[E]</sup> button.</p>
</li>
<li>
<p>From the top of the <strong>Source Control</strong> tab, click the three dots <code>...</code><sup>[F]</sup> icon to expand a drop-down menu of options. Click on the <strong>Clone</strong><sup>[G]</sup> option.</p>
</li>
<li>
<p>Follow the instructions for the remainder of this section to clone the <code>ansible-wca-demo-kit</code> repository to your local machine<sup>[H]</sup>.</p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/setupgit1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupgit1.png" width="500" /></a></p>
<p><a class="glightbox" href="../_attachments/setupgit2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupgit2.png" width="500" /></a></p>
<p><a class="glightbox" href="../_attachments/setupgit3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupgit3.png" width="500" /></a></p>
<p><a class="glightbox" href="../_attachments/setupgit4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupgit4.png" width="500" /></a></p>
<p><a class="glightbox" href="../_attachments/setupgit5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setupgit5.png" width="500" /></a></p>
</details>
<details class="quote">
<summary>COPY AND PASTE INSTRUCTIONS INTO A VIRTUAL MACHINE</summary>
<p>As you are running the lab environment inside a virtual machine (VM), it is not be possible to "paste" lab instructions from your local machine's clipboard directly into the VM.</p>
<p>If you wish to copy and paste instructions directly from the lab documentation, it is recommended that you open the GitHub instructions <strong>inside</strong> the VM's web browser (Firefox). This will allow you to copy instructions to the VM's clipboard and paste instructions inside the VS Code editor.</p>
</details>
<hr />
<h2 id="setup-vi-next-steps"><strong>vi. Next steps</strong></h2>
<p>The following section will cover the fundamentals of AI-recommended code generation for Ansible Tasks.</p></section><section class="print-page" id="generating"><h1 id="generating-_1"></h1>
<p><div class="video-container"><video style="position: relative; width: 100%; height: 22.172vw" controls  ><source src="../_videos/generating.mp4" type="video/mp4" /></video></div></p>
<div class="admonition quote">
<p>Christopher Bienko <em>(Principal, IBM Global Sales Enablement)</em> demonstrates key elements and hands-on components of the <code>Generating Code</code> module. <em><a href="https://ibm.seismic.com/Link/Content/DCD9HcG7pfXd9GhBDWQJVgM47J4V" target="_blank">[10 min]</a></em></p>
</div>
<h2 id="generating-i-generating-code-with-ibm-watsonx-code-assistant-for-red-hat-ansible-lightspeed"><strong>i. Generating Code with IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</strong></h2>
<p>An <strong>Ansible Task</strong> is a statement in Ansible's automation script (the YAML-based Playbooks you will be working with) that declares a single action to be executed. This might be installing a package, copying a file, or shutting down a service on a remote machine. Each <em>Task</em> represents an idempotent operation (an action that can be repeated multiple times and deliver the same result every time) that aligns the remote managed node to the specified state. Idempotent operations also ensure consistency across multiple executions, guaranteeing the same steps are taken on each execution of the task.</p>
<p>After you have learned the fundamentals of generating Ansible Task code blocks using <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em> (<strong>WCA</strong>), you'll be ready to shape and tailor the AI-generated code recommendations using WCA's model tuning capabilities.</p>
<hr />
<p><a class="glightbox" href="../_attachments/lightspeed.gif" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/lightspeed.gif" /></a></p>
<hr />
<h2 id="generating-ii-single-task-ansible-operations"><strong>ii. Single task Ansible operations</strong></h2>
<p>The process of creating AI-generated <strong>code recommendations</strong> is as simple as modifying the natural language (plain English) Task descriptions of an action that is to be executed, which always start with <code>- name:</code> and are followed by some description of the task to be performed. Ansible Tasks are often preceded with the prefix <code>#</code>, indicating developer comments or documentation. After the natural language description of the automation Task has been set by the user, WCA handles the rest.</p>
<p>WCA is also capable of generating multiple Ansible Tasks from more complex natural language descriptions— what is referred to as <strong>multi-task</strong> code generation —which you will experiment with later in this module. However, to get started, let's begin with the basics of generating code for <strong>single task</strong> use cases.</p>
<hr />
<ol>
<li>
<p>Begin by opening the <code>install_cockpit_single-task.yml</code> Playbook from the list of assets in the Explorer browser.</p>
<ul>
<li>Click the <strong>Explorer</strong> tab from the left-hand interface<sup>[A]</sup></li>
<li>Drill down into the <code>Install and configure Cockpit using Ansible</code> subdirectory<sup>[B]</sup></li>
<li>Double-click the <code>install_cockpit_single-task.yml</code> Playbook</li>
<li>A replica of the Playbook code is also included below in the documentation</li>
</ul>
<p><br/></p>
<div class="admonition warning inline">
<p>The red highlighting within the editor reminds users that the <code>tasks:</code> section contains no valid <code>-name:</code> task definitions. This is part of WCA's code validation process which runs automatically and alerts users to syntax errors in their code. You can safely ignore these warnings for now, as you will be un-commenting and generating valid <code>-name:</code> task definitions in the following steps.</p>
</div>
<p><a class="glightbox" href="../_attachments/Generating-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/Generating-1.png" width="400" /></a></p>
</li>
</ol>
<hr />
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="generating-__tabbed_1_1" name="generating-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_1_1">~/Documents/ansible-wca-demo-kit/install and configure Cockpit using Ansible/install_cockpit_single-task.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#generating-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#generating-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#generating-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#generating-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#generating-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#generating-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#generating-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#generating-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#generating-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#generating-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#generating-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#generating-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#generating-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#generating-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#generating-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#generating-__codelineno-0-17">17</a></span>
<span class="normal"><a href="#generating-__codelineno-0-18">18</a></span>
<span class="normal"><a href="#generating-__codelineno-0-19">19</a></span>
<span class="normal"><a href="#generating-__codelineno-0-20">20</a></span>
<span class="normal"><a href="#generating-__codelineno-0-21">21</a></span>
<span class="normal"><a href="#generating-__codelineno-0-22">22</a></span>
<span class="normal"><a href="#generating-__codelineno-0-23">23</a></span>
<span class="normal"><a href="#generating-__codelineno-0-24">24</a></span>
<span class="normal"><a href="#generating-__codelineno-0-25">25</a></span>
<span class="normal"><a href="#generating-__codelineno-0-26">26</a></span>
<span class="normal"><a href="#generating-__codelineno-0-27">27</a></span>
<span class="normal"><a href="#generating-__codelineno-0-28">28</a></span>
<span class="normal"><a href="#generating-__codelineno-0-29">29</a></span>
<span class="normal"><a href="#generating-__codelineno-0-30">30</a></span>
<span class="normal"><a href="#generating-__codelineno-0-31">31</a></span>
<span class="normal"><a href="#generating-__codelineno-0-32">32</a></span>
<span class="normal"><a href="#generating-__codelineno-0-33">33</a></span>
<span class="normal"><a href="#generating-__codelineno-0-34">34</a></span>
<span class="normal"><a href="#generating-__codelineno-0-35">35</a></span>
<span class="normal"><a href="#generating-__codelineno-0-36">36</a></span>
<span class="normal"><a href="#generating-__codelineno-0-37">37</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">  </span><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">  </span><span class="c1"># module_defaults:</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">  </span><span class="c1">#   ansible.builtin.service:</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">  </span><span class="c1">#     enabled: true</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">  </span><span class="c1">#     state: started</span><span class="w"></span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">        </span><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">        </span><span class="c1"># # 1a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">        </span><span class="c1"># #     Note - The suggestion included Ansible best practices by using Fully Qualified Collection name.</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">    </span><span class="c1"># - name: Install cockpit package</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">        </span><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">        </span><span class="c1"># # 2a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">        </span><span class="c1"># #     Note - Ansible Lightspeed used &quot;ansible.builtin.template&quot; module based on the &quot;.j2&quot; file extension.</span><span class="w"></span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="c1"># #     Note - The suggestion set the file permissions (&quot;0644&quot;), owner, and group based on Ansible best practices.</span><span class="w"></span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">    </span><span class="c1"># - name: Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">        </span><span class="c1"># TASK 3</span><span class="w"></span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">        </span><span class="c1"># # 3a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">        </span><span class="c1"># #     Note - Ansible Lightspeed used the generic &quot;Start and enable service&quot; prompt</span><span class="w"></span>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">        </span><span class="c1"># #            and full Playbook context to infer the recommendation should start the &quot;cockpit&quot; service.</span><span class="w"></span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="w">        </span><span class="c1"># # 3b. Uncomment the &quot;module_defaults&quot; section at the top of the Playbook.</span><span class="w"></span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">        </span><span class="c1"># # 3c. Clear current task suggestion and request updated suggestion.</span><span class="w"></span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">        </span><span class="c1"># #     Note - Ansible Lightspeed used the full Playbook context and evaluated the &quot;module_defaults&quot;</span><span class="w"></span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">        </span><span class="c1"># #            when generating a suggestion.</span><span class="w"></span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">        </span><span class="c1"># #            The updated suggestion no longer includes &quot;enabled:&quot; and &quot;state:&quot; arguments.</span><span class="w"></span>
<a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">    </span><span class="c1"># - name: Start and enable service</span><span class="w"></span>
<a id="__codelineno-0-33" name="__codelineno-0-33"></a>
<a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">        </span><span class="c1"># TASK 4</span><span class="w"></span>
<a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">        </span><span class="c1"># # 4a. Uncomment task description below and generate an Ansible Playbook task suggestion.</span><span class="w"></span>
<a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">        </span><span class="c1"># # 4b. Save the Playbook.</span><span class="w"></span>
<a id="__codelineno-0-37" name="__codelineno-0-37"></a><span class="w">    </span><span class="c1"># - name: Wait 15 seconds port 9090</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<hr />
<p>The <code>install_cockpit_single-task.yml</code> Playbook code above warrants some explanation before we move on with making AI-generated modifications to it:</p>
<ul>
<li>
<p><strong>Line 2</strong> essentially marks the beginning of the Playbook instructions, the purpose of which is to automate the process of installing and configuring <strong><a href="https://www.redhat.com/en/blog/automate-rhel-web-console-deployments-cockpit-and-certificate-rhel-system-roles" target="_blank">Cockpit</a></strong> for Red Hat Ansible.</p>
</li>
<li>
<p><strong>Lines 3-4</strong> define variables that will remain static throughout the remainder of the Playbook. These variables will be referenced by the AI-generated code suggestions at a later stage. This is a key capability of the offering and one which you will explore in much finer details later on in this module.</p>
</li>
<li>
<p><strong>Lines 6-9</strong> are variables which have been <em>commented out</em> and therefore are invisible to the execution of the Ansible script <strong>and</strong> not examined by WCA for context when generating code recommendations. You will experiment with how removing the <code>#</code> comment blocks impacts the recommendations of task block code. "Uncommenting" these lines of code will make them viable for execution and these lines will afterwards be considered as valid Playbook "context" for AI code generation.</p>
</li>
</ul>
<hr />
<ol start="2">
<li>
<p>Locate <code>TASK 1</code> on <strong>Line 15</strong> of the YAML file, which handles installation of <a href="https://www.redhat.com/en/blog/automate-rhel-web-console-deployments-cockpit-and-certificate-rhel-system-roles" target="_blank"><strong>Cockpit</strong></a> for Ansible. Cockpit is an interactive server administration interface that provides a graphical overview of statistics and configurations for a system or systems within a network. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#generating-__codelineno-1-1"></a><span class="w">    </span><span class="c1"># - name: Install cockpit package</span><span class="w"></span>
</code></pre></div>
<p>Pay attention to the indentation and characters used on <strong>Line 15</strong>, which in sequence from left to right are as follows:</p>
<ul>
<li>begins with <span class="keys"><kbd class="key-tab">Tab</kbd></span> (or <span class="keys"><kbd class="key-space">Space</kbd></span> whitespaces) for indentation</li>
<li>a <code>#</code> character to "comment out" the line's contents</li>
<li>a whitespace <span class="keys"><kbd class="key-space">Space</kbd></span> character</li>
<li><code>- name:</code> which signifies the start of a Task definition</li>
<li>and finally the natural language description of the Task</li>
</ul>
<div class="admonition note">
<p class="admonition-title">INDENTATION LEVELS AND WHITESPACE</p>
<p>Similar to Python, Ansible and YAML-based Playbooks are very sensitive to whitespacing and indentation. Indentations (such as the <span class="keys"><kbd class="key-tab">Tab</kbd></span> in this example) denote different hierarchies and code nesting levels within the YAML structure.</p>
<p>You may use <span class="keys"><kbd class="key-space">Space</kbd></span> instead of <span class="keys"><kbd class="key-tab">Tab</kbd></span> if you prefer, but be sure to <strong>use indentations consistently</strong>: choose to use either <span class="keys"><kbd class="key-tab">Tab</kbd></span> or <span class="keys"><kbd class="key-space">Space</kbd></span> for indenting lines of code, and do not interchange between the two.</p>
</div>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>To generate code for <code>TASK 1</code>, first <strong>uncomment</strong> the line of code (remove the <code>#</code> character from the start of a line).</p>
<ul>
<li>Highlight the line(s) of code you wish to uncomment and then press <span class="keys"><kbd class="key-command">Cmd</kbd><span>+</span><kbd class="key-question">?</kbd></span> for macOS or <span class="keys"><kbd class="key-control">Ctrl</kbd><span>+</span><kbd class="key-question">?</kbd></span> for Windows</li>
<li>You can repeat those keystrokes with the line(s) selected to toggle between commenting or uncommenting lines of code</li>
<li>
<p><em>Tip:</em> commented out lines of code in VS Code will appear as green text</p>
<p><br/></p>
<p>Afterwards, <strong>Line 15</strong> should look like the following — beginning with a single <span class="keys"><kbd class="key-tab">Tab</kbd></span></p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#generating-__codelineno-2-1"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>Now you are ready to begin generating code. Place your cursor on <strong>Line 15</strong> and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
<ul>
<li>Wait for WCA to engage and generate the suggested (in <em>grey, italicized text</em>) code block for executing the task</li>
<li>This temporary code suggestion is entirely generated by AI</li>
<li>As a user, you have the option to either:<ol>
<li><strong>Accept</strong> the code recommendation as-given by pressing <span class="keys"><kbd class="key-tab">Tab</kbd></span></li>
<li><strong>Modify</strong> the recommended code by highlighting and replacing the italicized text</li>
</ol>
</li>
</ul>
<details class="quote">
<summary>FAILED TO CONNECT TO THE SERVER / <code>"YOU DON'T HAVE ACCESS TO IBM WATSONX..."</code></summary>
<p>This warning will occur when the Ansible plugin for VS Code needs to be re-authenticated with WCA. It can occur after an extended period of inactivity or a system restart. For example, if your lab environment is running inside a VM, pausing or restarting the VM may produce this error.</p>
<p>To re-authenticate:</p>
<ul>
<li>
<p><strong>Sign out</strong> from the <em>VS Code</em> application by clicking the User icon<sup>[A]</sup> in the bottom-left corner of the interface, hover over your username, and then click <strong>Sign Out</strong><sup>[B]</sup></p>
</li>
<li>
<p><strong>If you are running this environment inside a virtual machine (VM)</strong>, closing and restarting the VM <em>will not</em> resolve the issue — you must sign out from the <em>VS Code</em> application, not the VM</p>
</li>
<li>
<p>Once logged out, follow from <em>Step 7</em> of the <em>Setup &amp; Troubleshooting</em> to re-authenticate with WCA</p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-1.png" width="600" /></a></p>
</details>
<details class="quote">
<summary>CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
<details class="quote">
<summary><code>"ANSIBLE-LINT IS NOT AVAILABLE."</code></summary>
<p><code>ansible-lint</code> checks Playbooks for practices and behavior that could potentially be improved and can fix some of the most common ones for you. It will constantly check your Ansible syntax as you type and provide recommendations for how to improve it.</p>
<ul>
<li>
<p>You can safely <strong>ignore</strong> this error if it occurs during the lab exercises</p>
</li>
<li>
<p>If you wish to install <code>ansible-lint</code> on your local machine, execute the following instruction within a Terminal console:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#generating-__codelineno-3-1"></a>python3 -m pip install --upgrade --user ansible-lint
</code></pre></div>
<p><a class="glightbox" href="../_attachments/troubleshooting-4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-4.png" width="600" /></a></p>
</li>
</ul>
</details>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>Hit <span class="keys"><kbd class="key-tab">Tab</kbd></span> to accept the suggested code and then compare with the <code>SOLUTION</code> tab below.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="generating-__tabbed_2_1" name="generating-__tabbed_2" type="radio" /><input id="generating-__tabbed_2_2" name="generating-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_2_1">TEMPLATE</label><label for="generating-__tabbed_2_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#generating-__codelineno-4-1"></a><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#generating-__codelineno-4-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#generating-__codelineno-5-1"></a><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#generating-__codelineno-5-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#generating-__codelineno-5-3"></a><span class="nt">ansible.builtin.package</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#generating-__codelineno-5-4"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#generating-__codelineno-5-5"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>As part of the plain-text description of the Task, WCA was asked to include the <code>cockpit</code> Role, part of the <a href="https://access.redhat.com/articles/3050101" target="_blank">Red Hat Enterprise Linux System Roles</a> Certified Content Collection. The AI-generated code suggestion invoked a <a href="https://docs.ansible.com/ansible/latest/collections_guide/collections_using_playbooks.html" target="_blank">Fully Qualified Collection Name</a> (<strong>FQCN</strong>) - <code>ansible.builtin.package</code></p>
<p>Making use of FQCNs where possible is a recommended best practice and is a prime example of the many ways in which the offering infuses post-processing capabilities within the AI-generated code produced by WCA. </p>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Additional examples of infusing best-practices into AI-generated code recommendations can be found in  <code>TASK 2</code> (<strong>Line 21</strong> of the unmodified template or <strong>Line 25</strong> after <em>Step 5</em>):</p>
<ul>
<li>Uncomment <code>- name: Copy cockpit.conf.j2 to /etc/cockpit</code></li>
<li>Hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to generate the task code recommendation and accept the AI-suggested code (without modifications) by pressing <span class="keys"><kbd class="key-tab">Tab</kbd></span></li>
<li>Compare your results with the <code>SOLUTION</code> tab below</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="generating-__tabbed_3_1" name="generating-__tabbed_3" type="radio" /><input id="generating-__tabbed_3_2" name="generating-__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_3_1">TEMPLATE</label><label for="generating-__tabbed_3_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#generating-__codelineno-6-1"></a><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#generating-__codelineno-6-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#generating-__codelineno-7-1"></a><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#generating-__codelineno-7-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#generating-__codelineno-7-3"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#generating-__codelineno-7-4"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.conf.j2</span><span class="w"></span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#generating-__codelineno-7-5"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/cockpit/cockpit.conf</span><span class="w"></span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#generating-__codelineno-7-6"></a><span class="w">    </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#generating-__codelineno-7-7"></a><span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#generating-__codelineno-7-8"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
</code></pre></div>
</div>
</div>
</div>
<p>The AI-generated code recommendation will copy <a href="https://github.com/craig-br/demos/blob/main/blogs/lightspeed_tech_preview_jun2023/files/cockpit.conf" target="_blank"><code>cockpit.conf</code></a> to the target host.</p>
<p>Take note of the fact that the recommendation included the <code>mode:</code> argument and set the Linux file permissions to <code>0644</code>, neither of which were things explicitly requested in the Task <code>-name</code> description, but are both additions which adhere to best practices around defining Ansible automaton tasks. Setting a file permission to <code>0644</code> specifies read and write permissions for User and Group levels within the Linux OS, and provides only read permissions to all others.</p>
</li>
</ol>
<hr />
<h2 id="generating-iii-multi-task-ansible-operations"><strong>iii. Multi-task Ansible operations</strong></h2>
<p>Up to this point, we've kept a narrow aperture on AI-generated recommendations for single tasks — examining and experimenting with generating Ansible code task by task, one at a time. However, a powerful WCA feature is the ability to combine multiple task descriptions into a single natural language prompt; in turn, WCA is able to parse that instruction, decompose the instruction into discrete Ansible Task parts, and return a complete code recommendation for achieving the author's intended goal.</p>
<p>Syntactically, multiple tasks are combined into a single natural language expression through the use of <strong>ampersand</strong> (<code>&amp;</code>) characters. Simply write out all the automation task descriptions on a single line, separating each description with a <code>&amp;</code> character. The line must also <em>begin</em> with a <code>#</code> character for reasons that will be explained shortly.</p>
<hr />
<ol start="7">
<li>
<p>To illustrate, let's look at a multi-task Ansible Playbook: <code>install_cockpit_multi-task.yml</code></p>
<ul>
<li>
<p>The contents of this Playbook should look familiar to you already: it is essentially the same Playbook examined in <em>Steps 1-6</em> (<code>install_cockpit_single-task.yml</code>), re-written in an equivalent multi-task expression</p>
</li>
<li>
<p>Each of the Task descriptions from the previous Playbook have been consolidated into a single description on <strong>Line 12</strong>, separated by <code>&amp;</code> characters</p>
</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="generating-__tabbed_4_1" name="generating-__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_4_1">~/Documents/ansible-wca-demo-kit/install and configure Cockpit using Ansible/install_cockpit_multi-task.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-8-1"> 1</a></span>
<span class="normal"><a href="#generating-__codelineno-8-2"> 2</a></span>
<span class="normal"><a href="#generating-__codelineno-8-3"> 3</a></span>
<span class="normal"><a href="#generating-__codelineno-8-4"> 4</a></span>
<span class="normal"><a href="#generating-__codelineno-8-5"> 5</a></span>
<span class="normal"><a href="#generating-__codelineno-8-6"> 6</a></span>
<span class="normal"><a href="#generating-__codelineno-8-7"> 7</a></span>
<span class="normal"><a href="#generating-__codelineno-8-8"> 8</a></span>
<span class="normal"><a href="#generating-__codelineno-8-9"> 9</a></span>
<span class="normal"><a href="#generating-__codelineno-8-10">10</a></span>
<span class="normal"><a href="#generating-__codelineno-8-11">11</a></span>
<span class="normal"><a href="#generating-__codelineno-8-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
<a id="__codelineno-8-10" name="__codelineno-8-10"></a>
<a id="__codelineno-8-11" name="__codelineno-8-11"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-12" name="__codelineno-8-12"></a><span class="w">    </span><span class="c1"># Install cockpit package &amp; Copy cockpit.conf.j2 to /etc/cockpit &amp; Start and enable service &amp; Wait 15 seconds port 9090</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<hr />
<ol start="8">
<li>
<p>There are two crucial distinctions between <em>single task</em> and <em>multi-task</em> code generation: formatting and execution.</p>
<ul>
<li><em>Formatting</em>: Notice that <strong>Line 12</strong> does not begin with <code>-name:</code>, as was the case with single task descriptions</li>
<li><em>Execution</em>: In order to generate AI code recommendations for multi-task descriptions, <strong>Line 12</strong> must <em>stay commented out</em> (the <code>#</code> <em>must remain</em> at the start of the line)</li>
</ul>
<p><br/></p>
<p>What is the rationale behind this? When WCA's generative AI capabilities parse <strong>Line 12</strong>, its output will include multiple <code>-name:</code> tasks, each containing potentially multiple lines of instructions, based on how many <code>&amp;</code>-delineated task descriptions are included on the line.</p>
<p>Therefore, the way in which the code generation step is executed on <strong>Line 12</strong> is a consequence of the formatting decision. Execution of a code generation step on a commented-out (<code>#</code>) line containing <code>&amp;</code> delineators is recognized by WCA as a unique case that will be acted upon as a multi-task statement.</p>
</li>
</ol>
<hr />
<ol start="9">
<li>
<p>Place your cursor at the end of <strong>Line 12</strong>, and <em>without</em> removing the <code>#</code> character, press <span class="keys"><kbd class="key-enter">Enter</kbd></span> to execute the code generation step. Be aware that generating code for multi-task descriptions will take longer compared to a single task.</p>
<p>Compare the <code>MULTI-TASK</code> solution tab with the <code>SINGLE TASK</code> solution (copied over from <em>Step 6</em>). How did the multi-task code generation fare compared to the single task approach?</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="generating-__tabbed_5_1" name="generating-__tabbed_5" type="radio" /><input id="generating-__tabbed_5_2" name="generating-__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_5_1">MULTI-TASK</label><label for="generating-__tabbed_5_2">SINGLE TASK</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#generating-__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#generating-__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#generating-__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#generating-__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#generating-__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#generating-__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#generating-__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#generating-__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#generating-__codelineno-9-10">10</a></span>
<span class="normal"><a href="#generating-__codelineno-9-11">11</a></span>
<span class="normal"><a href="#generating-__codelineno-9-12">12</a></span>
<span class="normal"><a href="#generating-__codelineno-9-13">13</a></span>
<span class="normal"><a href="#generating-__codelineno-9-14">14</a></span>
<span class="normal"><a href="#generating-__codelineno-9-15">15</a></span>
<span class="normal"><a href="#generating-__codelineno-9-16">16</a></span>
<span class="normal"><a href="#generating-__codelineno-9-17">17</a></span>
<span class="normal"><a href="#generating-__codelineno-9-18">18</a></span>
<span class="normal"><a href="#generating-__codelineno-9-19">19</a></span>
<span class="normal"><a href="#generating-__codelineno-9-20">20</a></span>
<span class="normal"><a href="#generating-__codelineno-9-21">21</a></span>
<span class="normal"><a href="#generating-__codelineno-9-22">22</a></span>
<span class="normal"><a href="#generating-__codelineno-9-23">23</a></span>
<span class="normal"><a href="#generating-__codelineno-9-24">24</a></span>
<span class="normal"><a href="#generating-__codelineno-9-25">25</a></span>
<span class="normal"><a href="#generating-__codelineno-9-26">26</a></span>
<span class="normal"><a href="#generating-__codelineno-9-27">27</a></span>
<span class="normal"><a href="#generating-__codelineno-9-28">28</a></span>
<span class="normal"><a href="#generating-__codelineno-9-29">29</a></span>
<span class="normal"><a href="#generating-__codelineno-9-30">30</a></span>
<span class="normal"><a href="#generating-__codelineno-9-31">31</a></span>
<span class="normal"><a href="#generating-__codelineno-9-32">32</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="w">    </span><span class="nt">ansible.builtin.package</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-14" name="__codelineno-9-14"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
<a id="__codelineno-9-15" name="__codelineno-9-15"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<a id="__codelineno-9-16" name="__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-9-18" name="__codelineno-9-18"></a><span class="w">    </span><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-19" name="__codelineno-9-19"></a><span class="w">        </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.conf.j2</span><span class="w"></span>
<a id="__codelineno-9-20" name="__codelineno-9-20"></a><span class="w">        </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/cockpit/cockpit.conf</span><span class="w"></span>
<a id="__codelineno-9-21" name="__codelineno-9-21"></a><span class="w">        </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-9-22" name="__codelineno-9-22"></a><span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-9-23" name="__codelineno-9-23"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
<a id="__codelineno-9-24" name="__codelineno-9-24"></a>
<a id="__codelineno-9-25" name="__codelineno-9-25"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Start and enable service</span><span class="w"></span>
<a id="__codelineno-9-26" name="__codelineno-9-26"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-27" name="__codelineno-9-27"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.socket</span><span class="w"></span>
<a id="__codelineno-9-28" name="__codelineno-9-28"></a>
<a id="__codelineno-9-29" name="__codelineno-9-29"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Wait 15 seconds port 9090</span><span class="w"></span>
<a id="__codelineno-9-30" name="__codelineno-9-30"></a><span class="w">    </span><span class="nt">ansible.builtin.wait_for</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-31" name="__codelineno-9-31"></a><span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9090</span><span class="w"></span>
<a id="__codelineno-9-32" name="__codelineno-9-32"></a><span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-10-1"> 1</a></span>
<span class="normal"><a href="#generating-__codelineno-10-2"> 2</a></span>
<span class="normal"><a href="#generating-__codelineno-10-3"> 3</a></span>
<span class="normal"><a href="#generating-__codelineno-10-4"> 4</a></span>
<span class="normal"><a href="#generating-__codelineno-10-5"> 5</a></span>
<span class="normal"><a href="#generating-__codelineno-10-6"> 6</a></span>
<span class="normal"><a href="#generating-__codelineno-10-7"> 7</a></span>
<span class="normal"><a href="#generating-__codelineno-10-8"> 8</a></span>
<span class="normal"><a href="#generating-__codelineno-10-9"> 9</a></span>
<span class="normal"><a href="#generating-__codelineno-10-10">10</a></span>
<span class="normal"><a href="#generating-__codelineno-10-11">11</a></span>
<span class="normal"><a href="#generating-__codelineno-10-12">12</a></span>
<span class="normal"><a href="#generating-__codelineno-10-13">13</a></span>
<span class="normal"><a href="#generating-__codelineno-10-14">14</a></span>
<span class="normal"><a href="#generating-__codelineno-10-15">15</a></span>
<span class="normal"><a href="#generating-__codelineno-10-16">16</a></span>
<span class="normal"><a href="#generating-__codelineno-10-17">17</a></span>
<span class="normal"><a href="#generating-__codelineno-10-18">18</a></span>
<span class="normal"><a href="#generating-__codelineno-10-19">19</a></span>
<span class="normal"><a href="#generating-__codelineno-10-20">20</a></span>
<span class="normal"><a href="#generating-__codelineno-10-21">21</a></span>
<span class="normal"><a href="#generating-__codelineno-10-22">22</a></span>
<span class="normal"><a href="#generating-__codelineno-10-23">23</a></span>
<span class="normal"><a href="#generating-__codelineno-10-24">24</a></span>
<span class="normal"><a href="#generating-__codelineno-10-25">25</a></span>
<span class="normal"><a href="#generating-__codelineno-10-26">26</a></span>
<span class="normal"><a href="#generating-__codelineno-10-27">27</a></span>
<span class="normal"><a href="#generating-__codelineno-10-28">28</a></span>
<span class="normal"><a href="#generating-__codelineno-10-29">29</a></span>
<span class="normal"><a href="#generating-__codelineno-10-30">30</a></span>
<span class="normal"><a href="#generating-__codelineno-10-31">31</a></span>
<span class="normal"><a href="#generating-__codelineno-10-32">32</a></span>
<span class="normal"><a href="#generating-__codelineno-10-33">33</a></span>
<span class="normal"><a href="#generating-__codelineno-10-34">34</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install and configure Cockpit</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">rhel</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install cockpit package</span><span class="w"></span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span class="w">    </span><span class="nt">ansible.builtin.package</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
<a id="__codelineno-10-15" name="__codelineno-10-15"></a><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
<a id="__codelineno-10-16" name="__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Copy cockpit.conf.j2 to /etc/cockpit</span><span class="w"></span>
<a id="__codelineno-10-18" name="__codelineno-10-18"></a><span class="w">    </span><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-19" name="__codelineno-10-19"></a><span class="w">        </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit.conf.j2</span><span class="w"></span>
<a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="w">        </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/cockpit/cockpit.conf</span><span class="w"></span>
<a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="w">        </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-10-22" name="__codelineno-10-22"></a><span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
<a id="__codelineno-10-24" name="__codelineno-10-24"></a>
<a id="__codelineno-10-25" name="__codelineno-10-25"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Start and enable service</span><span class="w"></span>
<a id="__codelineno-10-26" name="__codelineno-10-26"></a><span class="w">    </span><span class="nt">ansible.builtin.service</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-27" name="__codelineno-10-27"></a><span class="hll"><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cockpit</span><span class="w"></span>
</span><a id="__codelineno-10-28" name="__codelineno-10-28"></a><span class="hll"><span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">started</span><span class="w"></span>
</span><a id="__codelineno-10-29" name="__codelineno-10-29"></a><span class="hll"><span class="w">        </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</span><a id="__codelineno-10-30" name="__codelineno-10-30"></a>
<a id="__codelineno-10-31" name="__codelineno-10-31"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Wait 15 seconds port 9090</span><span class="w"></span>
<a id="__codelineno-10-32" name="__codelineno-10-32"></a><span class="w">    </span><span class="nt">ansible.builtin.wait_for</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-33" name="__codelineno-10-33"></a><span class="w">        </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9090</span><span class="w"></span>
<a id="__codelineno-10-34" name="__codelineno-10-34"></a><span class="w">        </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p>Comparing the two results, the only notable difference between the two approaches are <strong>Lines 27-29</strong> from the <code>SINGLE TASK</code> generative AI approach.</p>
<p>Both the <code>SINGLE TASK</code> and <code>MULTI-TASK</code> suggestions for that particular task <em>satisfy</em> the request made by the user. However, whether the single task or multi-task approach resulted in a better code suggestion is up to the judgement of the programmer. Nearly 90% of the remaining code was identical between the two approaches and was achieved in far fewer lines of code (and less typing) using the multi-task approach.</p>
<div class="admonition warning">
<p>The variability of generative AI suggestions is a fascinating topic and one that we will dive more deeply into with the module ahead.</p>
</div>
</li>
</ol>
<hr />
<ol start="11">
<li>
<p>Before moving on to other product features, experiment by creating a new Ansible Playbook in your workspace using the code template below. Suggestions will be given on how to perform the same automation task using single and multi-task generation approaches.</p>
<ul>
<li>
<p><strong>Save</strong> the YAML file as <code>create_ec2_single_multi.yml</code> (if you forget to save the file, WCA will not generate recommendations)</p>
</li>
<li>
<p>Copy the following code block to your clipboard using the <span class="keys"><kbd class="key-plus">+</kbd></span> icon in the top-right corner of the panel and paste into the newly created YAML file</p>
</li>
</ul>
<details class="quote">
<summary>HOW TO CREATE NEW <code>YAML</code> PLAYBOOKS</summary>
<p><strong>Note:</strong> You need to copy and paste the contents of the Playbook into a <strong>New File...</strong> within the <em>same</em> Lightspeed project directory that was used for the previous lab modules in order for the VS Code extension to engage.</p>
<p>To create a new YAML Playbook within a VS Code environment:</p>
<p><strong>a.</strong> Copy the contents of the Playbook to clipboard using the button in the top-right corner of the lab guide code block.</p>
<p><a class="glightbox" href="../_attachments/figure18.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure18.png" width="400" /></a></p>
<p><strong>b.</strong> Return to your VS Code environment. In the top-left corner of the interface, with your Ansible Lightspeed folder selected, click the <strong>New File...</strong> button.</p>
<p><a class="glightbox" href="../_attachments/figure19.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure19.png" width="400" /></a></p>
<p><strong>c.</strong> Name the file to a description of your choosing, ending with <code>.yml</code> as the filetype. Set it to <code>CustomPlaybook.yml</code>, for example. Save it to one of the directories in the <code>ansible-wca-demo-kit</code> folder.</p>
<p><strong>d.</strong> Paste the clipboard contents into the YAML file and follow along with the suggestions below.</p>
</details>
<details class="quote">
<summary>COPY AND PASTE CODE WITHIN THE VM</summary>
<p>Information "copied" to your local machine's clipboard cannot be "pasted" directly into the virtual machine (VM) environment or VS Code. If you wish to copy and paste instructions directly from the lab documentation, it is recommended that you open the GitHub instructions <strong>inside</strong> the VM's web browser (Firefox). This will allow you to copy instructions to the VM's clipboard and paste instructions inside the VS Code editor.</p>
</details>
<details class="quote">
<summary>ANSIBLE LIGHTSPEED IS MISSING OR CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="generating-__tabbed_6_1" name="generating-__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_6_1">~/Documents/ansible-wca-demo-kit/create_ec2_single_multi.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-11-1">1</a></span>
<span class="normal"><a href="#generating-__codelineno-11-2">2</a></span>
<span class="normal"><a href="#generating-__codelineno-11-3">3</a></span>
<span class="normal"><a href="#generating-__codelineno-11-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<hr />
<ol start="12">
<li>
<p>First, configure the Playbook for single task generation by adding the following code snippet into <strong>Line 5</strong> (remembering to properly indent with <span class="keys"><kbd class="key-tab">Tab</kbd></span> or <span class="keys"><kbd class="key-space">Space</kbd></span> characters):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#generating-__codelineno-12-1"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create vpc named demo</span><span class="w"></span>
</code></pre></div>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p>Your workspace Playbook should look identical to the <code>TEMPLATE</code> tab below. Place your cursor at the end of the newly-created <strong>Line 5</strong> and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to execute single task code generation. Compare your results to the <code>SOLUTION</code> tab. Record your results to a notepad so that you can compare the results later.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="generating-__tabbed_7_1" name="generating-__tabbed_7" type="radio" /><input id="generating-__tabbed_7_2" name="generating-__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_7_1">TEMPLATE</label><label for="generating-__tabbed_7_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-13-1">1</a></span>
<span class="normal"><a href="#generating-__codelineno-13-2">2</a></span>
<span class="normal"><a href="#generating-__codelineno-13-3">3</a></span>
<span class="normal"><a href="#generating-__codelineno-13-4">4</a></span>
<span class="normal"><a href="#generating-__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create vpc named demo</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#generating-__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#generating-__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#generating-__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#generating-__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#generating-__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#generating-__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#generating-__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#generating-__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#generating-__codelineno-14-10">10</a></span>
<span class="normal"><a href="#generating-__codelineno-14-11">11</a></span>
<span class="normal"><a href="#generating-__codelineno-14-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">create vpc named demo</span><span class="w"></span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">amazon.aws.ec2_vpc_net</span><span class="p p-Indicator">:</span><span class="w"></span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">            </span><span class="nt">cidr_block</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.80/16</span><span class="w"></span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">            </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">              </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="w">            </span><span class="nt">tenancy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">          </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vpc</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ol>
<hr />
<ol start="14">
<li>
<p>Now it's time to re-write the Playbook for multi-task code generation. The beauty of natural language statements is that your approach can be as terse or verbose as you want. The more verbose and descriptive, the more <em>prescriptive</em> you can be in terms of influencing the AI-generated code recommendations from WCA.</p>
<p>The topic of <em>"prompt tuning"</em> will be explored in much greater detail in the <a href="https://ibm.github.io/wca-generative-ai-training/customizing/" target="_blank">Task Description Tuning and Model Customization</a> module. But for now: </p>
<ul>
<li>
<p><strong>Replace</strong> all of the code inside <code>create_ec2_single_multi.yml</code> with the <code>TEMPLATE</code> code block (below)</p>
</li>
<li>
<p>Place your cursor at the end of <strong>Line 5</strong> (remember not to remove the <code>#</code> character) and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span>, then accept the recommendation with <span class="keys"><kbd class="key-tab">Tab</kbd></span></p>
</li>
<li>
<p>Compare your results to the <code>SOLUTION</code> tab and to the result from <em>Step 13</em></p>
</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="generating-__tabbed_8_1" name="generating-__tabbed_8" type="radio" /><input id="generating-__tabbed_8_2" name="generating-__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="generating-__tabbed_8_1">TEMPLATE</label><label for="generating-__tabbed_8_2">SOLUTION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-15-1">1</a></span>
<span class="normal"><a href="#generating-__codelineno-15-2">2</a></span>
<span class="normal"><a href="#generating-__codelineno-15-3">3</a></span>
<span class="normal"><a href="#generating-__codelineno-15-4">4</a></span>
<span class="normal"><a href="#generating-__codelineno-15-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="w">        </span><span class="c1"># create vpc named demo &amp; create security group for demo vpc and allow ssh and http &amp; create internet gateway named demogateway for demo vpc &amp; create subnet named demosubnet in demo vpc &amp; create route table for subnet demosubnet and gateway demogateway &amp; create t2.small ec2 instance in subnet demosubnet</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#generating-__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#generating-__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#generating-__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#generating-__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#generating-__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#generating-__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#generating-__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#generating-__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#generating-__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#generating-__codelineno-16-10">10</a></span>
<span class="normal"><a href="#generating-__codelineno-16-11">11</a></span>
<span class="normal"><a href="#generating-__codelineno-16-12">12</a></span>
<span class="normal"><a href="#generating-__codelineno-16-13">13</a></span>
<span class="normal"><a href="#generating-__codelineno-16-14">14</a></span>
<span class="normal"><a href="#generating-__codelineno-16-15">15</a></span>
<span class="normal"><a href="#generating-__codelineno-16-16">16</a></span>
<span class="normal"><a href="#generating-__codelineno-16-17">17</a></span>
<span class="normal"><a href="#generating-__codelineno-16-18">18</a></span>
<span class="normal"><a href="#generating-__codelineno-16-19">19</a></span>
<span class="normal"><a href="#generating-__codelineno-16-20">20</a></span>
<span class="normal"><a href="#generating-__codelineno-16-21">21</a></span>
<span class="normal"><a href="#generating-__codelineno-16-22">22</a></span>
<span class="normal"><a href="#generating-__codelineno-16-23">23</a></span>
<span class="normal"><a href="#generating-__codelineno-16-24">24</a></span>
<span class="normal"><a href="#generating-__codelineno-16-25">25</a></span>
<span class="normal"><a href="#generating-__codelineno-16-26">26</a></span>
<span class="normal"><a href="#generating-__codelineno-16-27">27</a></span>
<span class="normal"><a href="#generating-__codelineno-16-28">28</a></span>
<span class="normal"><a href="#generating-__codelineno-16-29">29</a></span>
<span class="normal"><a href="#generating-__codelineno-16-30">30</a></span>
<span class="normal"><a href="#generating-__codelineno-16-31">31</a></span>
<span class="normal"><a href="#generating-__codelineno-16-32">32</a></span>
<span class="normal"><a href="#generating-__codelineno-16-33">33</a></span>
<span class="normal"><a href="#generating-__codelineno-16-34">34</a></span>
<span class="normal"><a href="#generating-__codelineno-16-35">35</a></span>
<span class="normal"><a href="#generating-__codelineno-16-36">36</a></span>
<span class="normal"><a href="#generating-__codelineno-16-37">37</a></span>
<span class="normal"><a href="#generating-__codelineno-16-38">38</a></span>
<span class="normal"><a href="#generating-__codelineno-16-39">39</a></span>
<span class="normal"><a href="#generating-__codelineno-16-40">40</a></span>
<span class="normal"><a href="#generating-__codelineno-16-41">41</a></span>
<span class="normal"><a href="#generating-__codelineno-16-42">42</a></span>
<span class="normal"><a href="#generating-__codelineno-16-43">43</a></span>
<span class="normal"><a href="#generating-__codelineno-16-44">44</a></span>
<span class="normal"><a href="#generating-__codelineno-16-45">45</a></span>
<span class="normal"><a href="#generating-__codelineno-16-46">46</a></span>
<span class="normal"><a href="#generating-__codelineno-16-47">47</a></span>
<span class="normal"><a href="#generating-__codelineno-16-48">48</a></span>
<span class="normal"><a href="#generating-__codelineno-16-49">49</a></span>
<span class="normal"><a href="#generating-__codelineno-16-50">50</a></span>
<span class="normal"><a href="#generating-__codelineno-16-51">51</a></span>
<span class="normal"><a href="#generating-__codelineno-16-52">52</a></span>
<span class="normal"><a href="#generating-__codelineno-16-53">53</a></span>
<span class="normal"><a href="#generating-__codelineno-16-54">54</a></span>
<span class="normal"><a href="#generating-__codelineno-16-55">55</a></span>
<span class="normal"><a href="#generating-__codelineno-16-56">56</a></span>
<span class="normal"><a href="#generating-__codelineno-16-57">57</a></span>
<span class="normal"><a href="#generating-__codelineno-16-58">58</a></span>
<span class="normal"><a href="#generating-__codelineno-16-59">59</a></span>
<span class="normal"><a href="#generating-__codelineno-16-60">60</a></span>
<span class="normal"><a href="#generating-__codelineno-16-61">61</a></span>
<span class="normal"><a href="#generating-__codelineno-16-62">62</a></span>
<span class="normal"><a href="#generating-__codelineno-16-63">63</a></span>
<span class="normal"><a href="#generating-__codelineno-16-64">64</a></span>
<span class="normal"><a href="#generating-__codelineno-16-65">65</a></span>
<span class="normal"><a href="#generating-__codelineno-16-66">66</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision an EC2 instance</span><span class="w"></span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">        </span><span class="c1"># create vpc named demo &amp; create security group for demo vpc and allow ssh and http &amp; create internet gateway named demogateway for demo vpc &amp; create subnet named demosubnet in demo vpc &amp; create route table for subnet demosubnet and gateway demogateway &amp; create t2.small ec2 instance in subnet demosubnet</span><span class="w"></span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create vpc named demo</span><span class="w"></span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="w">          </span><span class="nt">amazon.aws.ec2_vpc_net</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="w">            </span><span class="nt">cidr_block</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.80/16</span><span class="w"></span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">            </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="w">              </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="w">            </span><span class="nt">tenancy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">default</span><span class="w"></span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="w">          </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vpc</span><span class="w"></span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create security group for demo vpc and allow ssh and http</span><span class="w"></span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">          </span><span class="nt">amazon.aws.ec2_security_group</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="w">            </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-16-18" name="__codelineno-16-18"></a><span class="w">            </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo security group</span><span class="w"></span>
<a id="__codelineno-16-19" name="__codelineno-16-19"></a><span class="w">            </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-20" name="__codelineno-16-20"></a><span class="w">            </span><span class="nt">rules</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-21" name="__codelineno-16-21"></a><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span><span class="w"></span>
<a id="__codelineno-16-22" name="__codelineno-16-22"></a><span class="w">                </span><span class="nt">from_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span><span class="w"></span>
<a id="__codelineno-16-23" name="__codelineno-16-23"></a><span class="w">                </span><span class="nt">to_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">22</span><span class="w"></span>
<a id="__codelineno-16-24" name="__codelineno-16-24"></a><span class="w">                </span><span class="nt">cidr_ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span><span class="w"></span>
<a id="__codelineno-16-25" name="__codelineno-16-25"></a><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">proto</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tcp</span><span class="w"></span>
<a id="__codelineno-16-26" name="__codelineno-16-26"></a><span class="w">                </span><span class="nt">from_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
<a id="__codelineno-16-27" name="__codelineno-16-27"></a><span class="w">                </span><span class="nt">to_port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">80</span><span class="w"></span>
<a id="__codelineno-16-28" name="__codelineno-16-28"></a><span class="w">                </span><span class="nt">cidr_ip</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span><span class="w"></span>
<a id="__codelineno-16-29" name="__codelineno-16-29"></a><span class="w">          </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sg</span><span class="w"></span>
<a id="__codelineno-16-30" name="__codelineno-16-30"></a>
<a id="__codelineno-16-31" name="__codelineno-16-31"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create internet gateway named demogateway for demo vpc</span><span class="w"></span>
<a id="__codelineno-16-32" name="__codelineno-16-32"></a><span class="w">          </span><span class="nt">amazon.aws.ec2_vpc_igw</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-33" name="__codelineno-16-33"></a><span class="w">            </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-34" name="__codelineno-16-34"></a><span class="w">            </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-35" name="__codelineno-16-35"></a><span class="w">              </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demogateway</span><span class="w"></span>
<a id="__codelineno-16-36" name="__codelineno-16-36"></a><span class="w">          </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">igw</span><span class="w"></span>
<a id="__codelineno-16-37" name="__codelineno-16-37"></a>
<a id="__codelineno-16-38" name="__codelineno-16-38"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create subnet named demosubnet in demo vpc</span><span class="w"></span>
<a id="__codelineno-16-39" name="__codelineno-16-39"></a><span class="w">          </span><span class="nt">amazon.aws.ec2_vpc_subnet</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-40" name="__codelineno-16-40"></a><span class="w">            </span><span class="nt">cidr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10.0.0.80/24</span><span class="w"></span>
<a id="__codelineno-16-41" name="__codelineno-16-41"></a><span class="w">            </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-42" name="__codelineno-16-42"></a><span class="w">            </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-43" name="__codelineno-16-43"></a><span class="w">              </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demosubnet</span><span class="w"></span>
<a id="__codelineno-16-44" name="__codelineno-16-44"></a><span class="w">          </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">subnet</span><span class="w"></span>
<a id="__codelineno-16-45" name="__codelineno-16-45"></a>
<a id="__codelineno-16-46" name="__codelineno-16-46"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create route table for subnet demosubnet and gateway demogateway</span><span class="w"></span>
<a id="__codelineno-16-47" name="__codelineno-16-47"></a><span class="w">          </span><span class="nt">amazon.aws.ec2_vpc_route_table</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-48" name="__codelineno-16-48"></a><span class="w">            </span><span class="nt">vpc_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">vpc.vpc.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-49" name="__codelineno-16-49"></a><span class="w">            </span><span class="nt">tags</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-50" name="__codelineno-16-50"></a><span class="w">              </span><span class="nt">Name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demosubnet</span><span class="w"></span>
<a id="__codelineno-16-51" name="__codelineno-16-51"></a><span class="w">            </span><span class="nt">subnets</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-52" name="__codelineno-16-52"></a><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">subnet.subnet.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-53" name="__codelineno-16-53"></a><span class="w">            </span><span class="nt">routes</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-54" name="__codelineno-16-54"></a><span class="w">              </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0.0.0/0</span><span class="w"></span>
<a id="__codelineno-16-55" name="__codelineno-16-55"></a><span class="w">                </span><span class="nt">gateway_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">igw.gateway_id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-56" name="__codelineno-16-56"></a><span class="w">          </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">route_table</span><span class="w"></span>
<a id="__codelineno-16-57" name="__codelineno-16-57"></a>
<a id="__codelineno-16-58" name="__codelineno-16-58"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create t2.small ec2 instance in subnet demosubnet</span><span class="w"></span>
<a id="__codelineno-16-59" name="__codelineno-16-59"></a><span class="w">          </span><span class="nt">amazon.aws.ec2_instance</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-16-60" name="__codelineno-16-60"></a><span class="w">            </span><span class="nt">key_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">_key_name_</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-61" name="__codelineno-16-61"></a><span class="w">            </span><span class="nt">instance_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">t2.small</span><span class="w"></span>
<a id="__codelineno-16-62" name="__codelineno-16-62"></a><span class="w">            </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">_image_</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-63" name="__codelineno-16-63"></a><span class="w">            </span><span class="nt">wait</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-16-64" name="__codelineno-16-64"></a><span class="w">            </span><span class="nt">vpc_subnet_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{</span><span class="nv"> </span><span class="s">subnet.subnet.id</span><span class="nv"> </span><span class="s">}&quot;</span><span class="w"></span>
<a id="__codelineno-16-65" name="__codelineno-16-65"></a><span class="w">            </span><span class="nt">security_group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo</span><span class="w"></span>
<a id="__codelineno-16-66" name="__codelineno-16-66"></a><span class="w">          </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ec2</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title"><code>TIMEOUT</code> WARNING</p>
<p>It may take several moments for WCA to process and return code recommendations for a multi-task description as complex as this one. If you receive a time-out warning, try executing the code generation step by pressing <span class="keys"><kbd class="key-enter">Enter</kbd></span> a second time.</p>
</div>
</li>
</ol>
<hr />
<h2 id="generating-iv-next-steps"><strong>iv. Next steps</strong></h2>
<p>In the next section, you will examine in detail WCA's post-processing and content source attribution capabilities.</p></section><section class="print-page" id="source-matching-post-processing"><h1 id="source-matching-post-processing-_1"></h1>
<p><div class="video-container"><video style="position: relative; width: 100%; height: 22.172vw" controls  ><source src="../_videos/source-matching-post-processing.mp4" type="video/mp4" /></video></div></p>
<div class="admonition quote">
<p>Christopher Bienko <em>(Principal, IBM Global Sales Enablement)</em> demonstrates key elements of the <code>Content Source Matching and Post-Processing</code> module. <em><a href="https://ibm.seismic.com/Link/Content/DCFFHTXJjcj7T8WGHDMRMchGTB33" target="_blank">[10 min]</a></em></p>
</div>
<h2 id="source-matching-post-processing-i-why-code-attribution-and-post-processing-matters-for-generative-ai"><strong>i. Why code attribution and post-processing matters for generative AI</strong></h2>
<p>At this point, you should now be well acquainted with <em>Ansible Tasks</em> and <em>Playbooks</em>. Ansible Playbooks are comprised of multiple Tasks — which you have been using <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed's</em> (<strong>WCA</strong>) generative AI capabilities to define and expand upon.</p>
<p>If a Playbook contains multiple "tasks" that together achieve some singular goal or purpose, you might want to group these tasks into a single reusable unit. For example, a string of "tasks" might provision infrastructure for separate development, test, and production clusters from a major cloud vendor. Patterns for automating endpoints from these vendors can be codified into <strong>Ansible Modules</strong>, which are supported by Red Hat and the Ansible community writ large.</p>
<p>And finally, collections of Playbooks and Modules can be organized into "blueprints" for automation tasks that are frequently used together to achieve some goal; a goal which you might want to make repeatable or shareable with other teams within your business. These blueprints are referred to as <strong>Ansible Roles</strong>. They provide a structured way to organize tasks, templates, files, and variables, and are available to drop directly into Ansible Playbooks. Roles make it possible to easily manage and set up complex automation tasks, essentially providing a rubric to streamline automation projects.</p>
<div class="admonition note">
<p>Collectively, these Playbooks, Modules, and Roles form a <strong>comprehensive ecosystem of business and community-driven support</strong> for patterning automation to work with the broadest range of vendors, technologies, and clouds.</p>
</div>
<p><strong><a href="https://galaxy.ansible.com" target="_blank">Ansible Galaxy</a></strong> is a Red Hat-curated, community-driven repository for <em>Ansible Roles</em>. Via communities such as Galaxy, thousands of Roles are available for Ansible users to leverage within their own Playbooks. Ansible Galaxy is also key to how generative AI code recommendations from WCA are attributed back to original content sources and authors.</p>
<hr />
<p><a class="glightbox" href="../_attachments/figure38.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/figure38.png" /></a></p>
<hr />
<h2 id="source-matching-post-processing-ii-content-source-matching"><strong>ii. Content source matching</strong></h2>
<p>A powerful capability within WCA is <strong>Content Source Matching</strong> (often referred to as "code explainability"), which attempts to match AI-generated code suggestions to the training data and sources that were utilized in generating the suggested Task code.</p>
<p>These code attribution suggestions are created using a <strong>k-NN</strong> (<a href="https://www.ibm.com/topics/knn#:~:text=Next%20steps-,K%2DNearest%20Neighbors%20Algorithm,of%20an%20individual%20data%20point." target="_blank">K-Nearest Neighbors</a>) algorithm that examines <strong>Ansible Galaxy</strong> and training data repositories in search of the nearest related content to the AI-generated code suggestions.</p>
<ol>
<li>
<p>To enable <strong>Content Source Matching</strong> capabilities within WCA, navigate to the main menu bar for VS Code and drill down into <strong>View</strong> &gt; <strong>Open View...</strong><sup>[A]</sup></p>
<p><br/>
<a class="glightbox" href="../_attachments/contentmatching1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/contentmatching1.png" width="600" /></a></p>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>The console<sup>[A]</sup> along the top of the VS Code interface is now activated and awaiting a prompt. Type <code>Lightspeed Training Matches</code> and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span> to confirm the selection.</p>
<ul>
<li>
<p>After making this configuration change to VS Code, all requests for WCA to generate code recommendations will now open a panel at the bottom of the VS Code interface</p>
</li>
<li>
<p>It is under the <code>Ansible</code> tab that <strong>content source matching</strong> results will be displayed</p>
</li>
<li>
<p>Other tabs will also displayed for variety of options: <code>Output</code>, <code>Debug Console</code>, <code>Terminal</code>, <code>Ports</code>, and <code>Comments</code></p>
<p><br/>
<a class="glightbox" href="../_attachments/contentmatching2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/contentmatching2.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="3">
<li>
<p>Open the <code>install_pgsql-single-task.yml</code> Ansible Playbook, which is included within the <code>ansible-wca-demo-kit</code> directory. The full location of the Playbook, as well as the contents, are available in the code block below.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="source-matching-post-processing-__tabbed_1_1" name="source-matching-post-processing-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="source-matching-post-processing-__tabbed_1_1">~/Documents/ansible-wca-demo-kit/install and configure PostgreSQL and PGAdmin container/install_pgsql-single-task.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#source-matching-post-processing-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-0-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Configure Database servers</span><span class="w"></span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">databases</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">  </span><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">      </span><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">      </span><span class="c1"># - name: Install postgresql-server</span><span class="w"></span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">      </span><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">      </span><span class="c1"># Ansible Lightspeed used an easy-to-understand natural language prompt and suggested the correct, more complex PostgreSQL CLI command to initiate the database.</span><span class="w"></span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">      </span><span class="c1"># Ansible Lightspeed used best practices and kept the task idempotent by including creates: /var/lib/pgsql/data/postgresql.conf in the suggestion.</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="w">      </span><span class="c1"># - name: Run postgresql setup command</span><span class="w"></span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">      </span><span class="c1"># TASK 3</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">      </span><span class="c1"># Ansible Lightspeed used natural language prompt and added state: started and enabled: true module arguments based on Start and enable... in the Ansible task description.</span><span class="w"></span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">      </span><span class="c1"># - name: Start and enable postgresql service</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<hr />
<ol start="4">
<li>
<p>Generate a code recommendation for the task on <strong>Line 8</strong> by placing your cursor at the end of the line and hitting <span class="keys"><kbd class="key-enter">Enter</kbd></span>.</p>
<ul>
<li>
<p>Pay attention to the code attribution details associated with this recommendation, which will be appearing under the <code>Ansible</code> tab at the bottom of the VS Code interface once the code recommendation is accepted with <span class="keys"><kbd class="key-tab">Tab</kbd></span></p>
</li>
<li>
<p>You need to <strong>accept</strong> the AI-generated code suggestions (using the <span class="keys"><kbd class="key-tab">Tab</kbd></span> key) <em>before</em> the <code>Ansible</code> content source matching tab will provide details about the code's origins</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#source-matching-post-processing-__codelineno-1-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#source-matching-post-processing-__codelineno-1-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Install postgresql-server</span><span class="w"></span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#source-matching-post-processing-__codelineno-1-3"></a><span class="w">  </span><span class="nt">ansible.builtin.package</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#source-matching-post-processing-__codelineno-1-4"></a><span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">postgresql-server</span><span class="w"></span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#source-matching-post-processing-__codelineno-1-5"></a><span class="w">    </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">present</span><span class="w"></span>
</code></pre></div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>The three most likely content sources used in training the WCA model— which produced the AI-generated code recommendations —are listed within the <code>Ansible</code> <strong>tab</strong><sup>[A]</sup>. Recall from earlier that these code attribution suggestions are created using a <strong>k-NN</strong>  algorithm that searches <strong>Ansible Galaxy</strong> repositories for the nearest related content to the AI-generated code suggestions.</p>
<p><br/>
<a class="glightbox" href="../_attachments/contentmatching5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/contentmatching5.png" width="600" /></a></p>
<p><br/>
Clicking the arrow icon to the left of each <strong>attribution</strong><sup>[B]</sup> will expand further details about the source. Information about the <code>URL</code>, <code>Path</code>, <code>Data Source</code>, <code>License</code>, and <code>Score</code> are displayed (where available) under each listing. Red Hat-certified and maintained collections, as well as contributors to open source projects on Ansible Galaxy, are the primary sources for Ansible Lightspeed model training and are the content sources you are most likely to see matched to AI-generated code recommendations.</p>
</li>
</ol>
<hr />
<ol start="6">
<li>Clicking on the <code>URL</code> field will redirect your web browser back to the precise collections and sources on <strong>Ansible Galaxy</strong> from which the code recommendations were derived. Here you can learn much richer details about the status of the project, any associated open source repositories involved (such as GitHub), contributions and activities ongoing with the code base, the author(s) involved, and many more intricacies.</li>
</ol>
<hr />
<p><a class="glightbox" href="../_attachments/figure39.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="../_attachments/figure39.png" /></a></p>
<hr />
<h2 id="source-matching-post-processing-iii-post-processing-capabilities"><strong>iii. Post-processing capabilities</strong></h2>
<p>Another element of code generation that WCA excels at is understanding <strong>context</strong> within the Playbook it is executing against. If a variable or attribute is defined earlier within that Playbook, it will be recalled and referenced— where it makes sense to do so —in the generation of subsequent lines of code. You may have already noticed these <strong>post-processing capabilities</strong> in your experimentations with WCA-generated code suggestions. Post-processing of Task descriptions and YAML file contents helps generate contextually aware, accurate Ansible content suggestions.</p>
<p>However, one way to make this feature quite obvious is to take a previously-generated block of Ansible Task code, update the value assigned to a named variable <em>earlier</em> in the Playbook, and then regenerate the Task code block. In theory, the newly-generated Task block will use the updated variable name (and differ from how the code block was originally generated).</p>
<hr />
<ol start="7">
<li>
<p>Using the Explorer tab, create a <strong>New File...</strong> YAML Playbook named <code>demo_provision_ec2_instance.yml</code> anywhere within the <code>/ansible-wca-demo-kit/</code> directory.</p>
<ul>
<li>
<p>You may save the Playbook in the root of the folder or any of the subdirectories</p>
</li>
<li>
<p>Be sure to reference the expandable tooltips below for instructions on how to perform these operations and how to configure the Playbook language for use with WCA</p>
</li>
<li>
<p><strong>Copy and paste</strong> the following code block into the <code>demo_provision_ec2_instance.yml</code> Playbook and then save the file</p>
</li>
</ul>
<details class="quote">
<summary>HOW TO CREATE NEW <code>YAML</code> PLAYBOOKS</summary>
<p><strong>Note:</strong> You need to copy and paste the contents of the Playbook into a <strong>New File...</strong> within the <em>same</em> Lightspeed project directory that was used for the previous lab modules in order for the VS Code extension to engage.</p>
<p>To create a new YAML Playbook within a VS Code environment:</p>
<p><strong>a.</strong> Copy the contents of the Playbook to clipboard using the button in the top-right corner of the lab guide code block.</p>
<p><a class="glightbox" href="../_attachments/figure18.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure18.png" width="400" /></a></p>
<p><strong>b.</strong> Return to your VS Code environment. In the top-left corner of the interface, with your Ansible Lightspeed folder selected, click the <strong>New File...</strong> button.</p>
<p><a class="glightbox" href="../_attachments/figure19.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure19.png" width="400" /></a></p>
<p><strong>c.</strong> Name the file to a description of your choosing, ending with <code>.yml</code> as the filetype. Set it to <code>CustomPlaybook.yml</code>, for example. Save it to one of the directories in the <code>ansible-wca-demo-kit</code> folder.</p>
<p><strong>d.</strong> Paste the clipboard contents into the YAML file and follow along with the suggestions below.</p>
</details>
<details class="quote">
<summary>COPY AND PASTE CODE WITHIN THE VM</summary>
<p>Information "copied" to your local machine's clipboard cannot be "pasted" directly into the virtual machine (VM) environment or VS Code. If you wish to copy and paste instructions directly from the lab documentation, it is recommended that you open the GitHub instructions <strong>inside</strong> the VM's web browser (Firefox). This will allow you to copy instructions to the VM's clipboard and paste instructions inside the VS Code editor.</p>
</details>
<details class="quote">
<summary>ANSIBLE LIGHTSPEED IS MISSING OR CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="source-matching-post-processing-__tabbed_2_1" name="source-matching-post-processing-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="source-matching-post-processing-__tabbed_2_1">demo_provision_ec2_instance.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#source-matching-post-processing-__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-10">10</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-11">11</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-12">12</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-13">13</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-14">14</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-15">15</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-16">16</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-17">17</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-18">18</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-19">19</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-20">20</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-21">21</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-22">22</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-23">23</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-24">24</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-25">25</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-26">26</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-27">27</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-28">28</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-29">29</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-30">30</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-31">31</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-32">32</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-33">33</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-34">34</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-35">35</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-36">36</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-37">37</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-38">38</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-39">39</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-40">40</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-41">41</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-42">42</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-43">43</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-44">44</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-45">45</a></span>
<span class="normal"><a href="#source-matching-post-processing-__codelineno-2-46">46</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EC2 Cloud Operations</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">  </span><span class="nt">module_defaults</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a><span class="w">    </span><span class="nt">group/aws</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">    </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">us-east-1</span><span class="w"></span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="c1">#  vars:</span><span class="w"></span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="c1">#    ec2_instance:</span><span class="w"></span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a><span class="c1">#    name: lightspeed-instance-01</span><span class="w"></span>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="c1">#    key_name: lightspeed-keypair</span><span class="w"></span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="c1">#    image_id: ami-016eb5d644c333ccb # RHEL 9 us-east-1</span><span class="w"></span>
<a id="__codelineno-2-16" name="__codelineno-2-16"></a><span class="c1">#    tags:</span><span class="w"></span>
<a id="__codelineno-2-17" name="__codelineno-2-17"></a><span class="c1">#      function: lightspeed-demo</span><span class="w"></span>
<a id="__codelineno-2-18" name="__codelineno-2-18"></a><span class="c1">#    security_group: secgroup-lightspeed</span><span class="w"></span>
<a id="__codelineno-2-19" name="__codelineno-2-19"></a>
<a id="__codelineno-2-20" name="__codelineno-2-20"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-2-21" name="__codelineno-2-21"></a><span class="w">        </span><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-2-22" name="__codelineno-2-22"></a><span class="w">        </span><span class="c1"># # 1a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-2-23" name="__codelineno-2-23"></a><span class="w">        </span><span class="c1"># #     Note - Best practices: The suggestion used the Fully Qualified Collection name.</span><span class="w"></span>
<a id="__codelineno-2-24" name="__codelineno-2-24"></a><span class="w">        </span><span class="c1"># #     Note - Context: Ansible Lightspeed used the Playbook name &quot;EC2 Cloud Operations&quot; to use the correct &quot;amazon.aws.ec2_vpc_subnet_info&quot; module.</span><span class="w"></span>
<a id="__codelineno-2-25" name="__codelineno-2-25"></a>
<a id="__codelineno-2-26" name="__codelineno-2-26"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Gather subnet info tag:Name subnet-lightspeed</span><span class="w"></span>
<a id="__codelineno-2-27" name="__codelineno-2-27"></a>
<a id="__codelineno-2-28" name="__codelineno-2-28"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain"># TASK 2</span><span class="w"></span>
<a id="__codelineno-2-29" name="__codelineno-2-29"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">#</span><span class="w"> </span><span class="c1"># 2a. Uncomment task description below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-2-30" name="__codelineno-2-30"></a><span class="w">        </span><span class="c1"># #     Note - Context: The suggestion included the previous task&#39;s registered variable in the suggestion.</span><span class="w"></span>
<a id="__codelineno-2-31" name="__codelineno-2-31"></a><span class="w">        </span><span class="c1"># #     Note - Accuracy: The suggestion provides the correct key value from the previously task&#39;s registered variable.</span><span class="w"></span>
<a id="__codelineno-2-32" name="__codelineno-2-32"></a>
<a id="__codelineno-2-33" name="__codelineno-2-33"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create vpc_subnet_id var</span><span class="w"></span>
<a id="__codelineno-2-34" name="__codelineno-2-34"></a>
<a id="__codelineno-2-35" name="__codelineno-2-35"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain"># TASK 3</span><span class="w"></span>
<a id="__codelineno-2-36" name="__codelineno-2-36"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">#</span><span class="w"> </span><span class="c1"># 3a. Uncomment task description &quot;Provision t3.micro instance&quot; below and generate a task suggestion.</span><span class="w"></span>
<a id="__codelineno-2-37" name="__codelineno-2-37"></a><span class="w">        </span><span class="c1"># #     Note - Efficiency: The suggestion provides practical variable examples to improve efficiency.</span><span class="w"></span>
<a id="__codelineno-2-38" name="__codelineno-2-38"></a>
<a id="__codelineno-2-39" name="__codelineno-2-39"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision t3.micro instance</span><span class="w"></span>
<a id="__codelineno-2-40" name="__codelineno-2-40"></a>
<a id="__codelineno-2-41" name="__codelineno-2-41"></a><span class="w">        </span><span class="l l-Scalar l-Scalar-Plain">#</span><span class="w"> </span><span class="c1"># 3b. Remove the above task and suggestion.</span><span class="w"></span>
<a id="__codelineno-2-42" name="__codelineno-2-42"></a><span class="w">        </span><span class="c1"># #     Uncomment 2nd task description &quot;Provision t3.micro instance using ec2_instance var&quot;.</span><span class="w"></span>
<a id="__codelineno-2-43" name="__codelineno-2-43"></a><span class="w">        </span><span class="c1"># #     Generate an updated suggestion.</span><span class="w"></span>
<a id="__codelineno-2-44" name="__codelineno-2-44"></a><span class="w">        </span><span class="c1"># #     Note - Context: The updated suggestion includes the &quot;ec2_instance variable fields in the suggestion&quot;</span><span class="w"></span>
<a id="__codelineno-2-45" name="__codelineno-2-45"></a>
<a id="__codelineno-2-46" name="__codelineno-2-46"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Provision t3.micro instance using ec2_instance var</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
<hr />
<ol start="8">
<li><code>TASK 1</code> (<strong>Line 26</strong>) and <code>TASK 2</code> (<strong>Line 33</strong>) are responsible for gathering information about a network subnet that is to be provisioned and then creating a virtual private cloud (VPC) definition based on those details.</li>
</ol>
<hr />
<ol start="9">
<li>
<p>Generate suggested code for <code>TASK 1</code> (<strong>Line 26</strong>) by placing the cursor at the end of the line, hitting <span class="keys"><kbd class="key-enter">Enter</kbd></span>, and then confirming with <span class="keys"><kbd class="key-tab">Tab</kbd></span>. Afterwards, perform the same steps to generate code for <code>TASK 2</code> as well.</p>
<ul>
<li>
<p>The first round of WCA-generated code produces a code block<sup>[A]</sup> with a <code>register: subnet_info</code> (<strong>Line 30</strong>), the result of which is to assign this VPC definition to a variable <code>subnet_info</code>. Nothing terribly complicated or surprising about that.</p>
</li>
<li>
<p>The WCA-generated code that follows for the task on <strong>Line 38</strong> (previously <em>Line 33</em> in the raw template) recommends a code block<sup>[B]</sup> with <code>vpc_subnet_id: "{ { subnet_info.subnets[0].subnet_id } }"</code> as the value associated with the VPC's subnet ID. Critically, the variable <code>subnet_info</code> that was generated in the previous Task<sup>[A]</sup> is also referenced in the second Task. This demonstrates the contextual awareness of WCA in action.</p>
<p><br/>
<a class="glightbox" href="../_attachments/contentmatching7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/contentmatching7.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/contentmatching8.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/contentmatching8.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="10">
<li>
<p>Change the name of variable <code>subnet_info</code> to <code>subnet_name</code> on <strong>Line 30</strong>. Then delete the code block recommendations under <strong>Line 38</strong> and regenerate the task.</p>
<ul>
<li>
<p>Notice that the new block<sup>[A]</sup> of <code>TASK 2</code> now references the variable <code>subnet_name</code> that was modified just a moment ago in <code>TASK 1</code></p>
</li>
<li>
<p>WCA has generated code for <code>TASK 2</code> that takes into account the <strong>modified context and variables</strong> from <code>TASK 1</code> of the Playbook</p>
<p><br/>
<a class="glightbox" href="../_attachments/contentmatching9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/contentmatching9.png" width="600" /></a></p>
<p><br/></p>
<p>Continue experimenting with WCA's contextual awareness and post-processing capabilities. Try adjusting other variables within the Playbook and study how these modifications impact the generation of later blocks of Task code within the Playbook. </p>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="source-matching-post-processing-iv-next-steps"><strong>iv. Next steps</strong></h2>
<p>In the next section, you will begin experimenting with customized Ansible Playbooks and testing how changes to Ansible Task natural language descriptions impacts the recommended code produced by WCA.</p></section><section class="print-page" id="customizing"><h1 id="customizing-_1"></h1>
<p><div class="video-container"><video style="position: relative; width: 100%; height: 22.172vw" controls  ><source src="../_videos/customizing.mp4" type="video/mp4" /></video></div></p>
<div class="admonition quote">
<p>Christopher Bienko <em>(Principal, IBM Global Sales Enablement)</em> demonstrates key elements of the <code>Task Description Tuning and Model Customization</code> module. <em><a href="https://ibm.seismic.com/Link/Content/DC3jTJ8DXqj32GfHc4PfBDgWFgGB" target="_blank">[15 min]</a></em></p>
</div>
<h2 id="customizing-i-fine-tuning-task-prompts"><strong>i. Fine-tuning task prompts</strong></h2>
<p>In this section, you will experiment with customized Ansible Playbooks and test how changes made to an Ansible Task's natural language descriptions can impact the recommended code produced by <em>IBM watsonx Code Assistant for Red Hat Ansible Lightspeed</em> (<strong>WCA</strong>).</p>
<div class="admonition note">
<p class="admonition-title">UNPREDICTABLE RESULTS FROM GENERATIVE AI &amp; LLMs</p>
<p>A consequence of using generative AI and Large Language Models (LLMs) is that the recommended code output of these systems will never be 100% consistent for each and every execution. For this reason, LLMs are referred to as "non-deterministic" systems — as opposed to "deterministic" systems. This is both a strength and weakness of LLMs. As you will observe in this module, even a slight modification to the Task description or the smallest change to how a Playbook is structured— the descriptions used, the variables set, and so on —will influence AI-generated code recommendations.</p>
<p>The iterative process that you will go through in this module can be viewed in three different ways:</p>
<ol>
<li>
<p>On the one hand, it shows the sensitivity of generative AI models to even the most nuanced change in <strong>natural language prompts</strong> — for good or bad. Generative AI can produce tremendous work and that output is further guided along by best practices built-in from Red Hat and IBM. But in the end, the AI can only infer user intent from the natural language descriptions supplied to it. The more clearly a user defines their Task descriptions and intent, the more likely that WCA will correctly generate code which mirrors that intent; conversely, the less precise those descriptions are, the more likely WCA will misinterpret and miss the mark. Precision <em>is</em> key for the disambiguation of natural language prompts.</p>
</li>
<li>
<p>Human feedback and <strong>humans-in-the-loop</strong> are essential to these formative stages of generative AI. As offerings like WCA mature, the natural language processing capabilities of the service will continue to be refined and improved. Additional packages, functions, and training data from Ansible Galaxy (as well as other sources) are continuously being added to IBM Granite's LLMs for code, which will in turn continually improve the AI-generated code recommendations made to users.</p>
</li>
<li>
<p>By using the <strong>Model Tuning</strong> capabilities built into WCA, organizations and users are able to customize the recommendations produced by the service, tuning a domain-specific LLM with the organization's <em>own</em> Ansible Playbooks. The content and code recommendations that WCA suggests can be tailored to an organization's standards, best practices, and programming styles. These capabilities will be explored later in this module.</p>
</li>
</ol>
</div>
<p>The take-away here is that <strong>your results may vary</strong>: they may differ from the <code>SOLUTION</code> code presented in the steps below. Keep this in mind as you work through the examples in this section and understand that it is not a bug, but rather a consequence of working with generative AI in general.</p>
<p>The precision with which a Playbook author describes Ansible Tasks in natural language will determine the accuracy and effectiveness of WCA's generated code recommendations.</p>
<hr />
<ol>
<li>
<p>A template <code>CUSTOM PLAYBOOK #1</code> YAML file has been prepared for you below.</p>
<ul>
<li>
<p>Copy and paste the code from the <code>TEMPLATE</code> tab into a <strong>New File...</strong> within VS Code</p>
</li>
<li>
<p>Name and save the file as you see fit: for example, <code>customplaybook1.yml</code></p>
</li>
</ul>
<details class="quote">
<summary>HOW TO CREATE NEW <code>YAML</code> PLAYBOOKS</summary>
<p><strong>Note:</strong> You need to copy and paste the contents of the Playbook into a <strong>New File...</strong> within the <em>same</em> Lightspeed project directory that was used for the previous lab modules in order for the VS Code extension to engage.</p>
<p>To create a new YAML Playbook within a VS Code environment:</p>
<p><strong>a.</strong> Copy the contents of the Playbook to clipboard using the button in the top-right corner of the lab guide code block.</p>
<p><a class="glightbox" href="../_attachments/figure18.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure18.png" width="400" /></a></p>
<p><strong>b.</strong> Return to your VS Code environment. In the top-left corner of the interface, with your Ansible Lightspeed folder selected, click the <strong>New File...</strong> button.</p>
<p><a class="glightbox" href="../_attachments/figure19.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/figure19.png" width="400" /></a></p>
<p><strong>c.</strong> Name the file to a description of your choosing, ending with <code>.yml</code> as the filetype. Set it to <code>CustomPlaybook.yml</code>, for example. Save it to one of the directories in the <code>ansible-wca-demo-kit</code> folder.</p>
<p><strong>d.</strong> Paste the clipboard contents into the YAML file and follow along with the suggestions below.</p>
</details>
<details class="quote">
<summary>COPY AND PASTE CODE WITHIN THE VM</summary>
<p>Information "copied" to your local machine's clipboard cannot be "pasted" directly into the virtual machine (VM) environment or VS Code. If you wish to copy and paste instructions directly from the lab documentation, it is recommended that you open the GitHub instructions <strong>inside</strong> the VM's web browser (Firefox). This will allow you to copy instructions to the VM's clipboard and paste instructions inside the VS Code editor.</p>
</details>
<details class="quote">
<summary>ANSIBLE LIGHTSPEED IS MISSING OR CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="customizing-__tabbed_1_1" name="customizing-__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="customizing-__tabbed_1_1">CUSTOM PLAYBOOK 1</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-10">10</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-11">11</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-12">12</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-13">13</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-14">14</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-15">15</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-16">16</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-17">17</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-18">18</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-19">19</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-20">20</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-21">21</a></span>
<span class="normal"><a href="#customizing-__codelineno-0-22">22</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1"># CUSTOM PLAYBOOK #1 — Invoke 2 modules to automatically update 2 types of servers.</span><span class="w"></span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1"># TASK 1</span><span class="w"></span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update web servers</span><span class="w"></span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">webservers</span><span class="w"></span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">  </span><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ensure apache is at the latest version</span><span class="w"></span>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file</span><span class="w"></span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="c1"># TASK 2</span><span class="w"></span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update db servers</span><span class="w"></span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">databases</span><span class="w"></span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">  </span><span class="nt">become</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ensure postgresql is at the latest version</span><span class="w"></span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Ensure that postgresql is started</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ol>
<hr />
<ol start="2">
<li>
<p>The template <code>CUSTOM PLAYBOOK #1</code> contains two sets of tasks:</p>
<ul>
<li>
<p><code>TASK 1</code> (<strong>Lines 5-12</strong>) checks if the web server software is up to date and runs an update if necessary</p>
</li>
<li>
<p><code>TASK 2</code> (<strong>Lines 15-22</strong>) checks if the database server software is up to date and runs an update if necessary</p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="3">
<li>Examine the instruction on <strong>Line 12</strong>, which prompts Ansible to create ("write") a configuration file for an Apache webserver:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#customizing-__codelineno-1-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file</span><span class="w"></span>
</code></pre></div></li>
</ol>
<hr />
<ol start="4">
<li>
<p>Place your cursor at the end of <strong>Line 12</strong> and press <span class="keys"><kbd class="key-enter">Enter</kbd></span> to generate WCA-recommended code for the task. Accept the recommendation by pressing <span class="keys"><kbd class="key-tab">Tab</kbd></span>.</p>
<p>Two tabs are presented below:</p>
<ul>
<li>
<p><code>AI-GENERATED CODE</code> shows the output from running WCA's generative AI capabilities on <strong>Line 12</strong> of the unmodified <em>CUSTOM PLAYBOOK #1</em> YAML template.</p>
</li>
<li>
<p><code>SOLUTION CODE</code> shows the expected (correct) code for performing the task that was written by a human programmer. In theory, the AI-generated code <em>should</em> be as good— or even superior to —the manually-written solution code. </p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="customizing-__tabbed_2_1" name="customizing-__tabbed_2" type="radio" /><input id="customizing-__tabbed_2_2" name="customizing-__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="customizing-__tabbed_2_1">AI-GENERATED CODE</label><label for="customizing-__tabbed_2_2">SOLUTION CODE</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-2-1">1</a></span>
<span class="normal"><a href="#customizing-__codelineno-2-2">2</a></span>
<span class="normal"><a href="#customizing-__codelineno-2-3">3</a></span>
<span class="normal"><a href="#customizing-__codelineno-2-4">4</a></span>
<span class="normal"><a href="#customizing-__codelineno-2-5">5</a></span>
<span class="normal"><a href="#customizing-__codelineno-2-6">6</a></span>
<span class="normal"><a href="#customizing-__codelineno-2-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file</span><span class="w"></span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">templates/apache.conf.j2</span><span class="w"></span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/apache2/sites-available/000-default.conf</span><span class="w"></span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="w">    </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">    </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span><span class="w"></span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-3-1">1</a></span>
<span class="normal"><a href="#customizing-__codelineno-3-2">2</a></span>
<span class="normal"><a href="#customizing-__codelineno-3-3">3</a></span>
<span class="normal"><a href="#customizing-__codelineno-3-4">4</a></span>
<span class="normal"><a href="#customizing-__codelineno-3-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file</span><span class="w"></span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/httpd.j2</span><span class="w"></span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/httpd.config</span><span class="w"></span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0644&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="5">
<li>
<p>As you can see, the <code>AI-GENERATED CODE</code> recommendations satisfy some of the requests, but also miss the mark in a few areas. When compared to the <code>SOLUTION CODE</code> tab:</p>
<ul>
<li>
<p>Both tabs appropriately utilize the <code>ansible.builtin.template</code> Module, which for this request is absolutely correct. <strong>Interesting fact:</strong> earlier (circa 2023) versions of WCA produced code recommendations for the <em>same task</em> as this one, which <em>did not</em> align with the expected solution. Instead, the recommendation was for the <code>ansible.builtin.copy:</code> Module to invoke <code>content: "{{ _content_ }}"</code>, which is not correct. This speaks to the continuously improving capabilities of the WCA and IBM Granite models.</p>
</li>
<li>
<p><code>AI-GENERATED CODE</code> recommended including statements that explicitly set <code>owner: root</code> and <code>group: root</code>, which are both appropriate when permissions are set to <code>mode: '0644'</code>. While not strictly necessary, these additional statements arguably are an <em>improvement</em> over the <code>SOLUTION CODE</code> results. It's also worth noting that the request to write the apache config file did not explicitly request <code>mode: '0644'</code> in the natural language description, but WCA nevertheless recommended it (post-processing) as this is a best practice for deploying Apache webservers.</p>
</li>
<li>
<p>The <code>src</code> and <code>dest</code> variables are not in agreement across the <code>AI-GENERATED CODE</code> and <code>SOLUTION CODE</code> tabs. This is an area for improvement. The natural language description wasn't precise about these details; therefore, this is an opportunity where more detailed and verbose instructions could better steer the recommendations WCA returns back with. </p>
<div class="admonition note">
<p>In general, <strong>the more ambiguous the Task description, the greater the likelihood that WCA will misinterpret the author's intent</strong> and suggest unwanted Ansible automation jobs. To help disambiguate our intention, Playbook authors should use more precise natural language terms and descriptions.</p>
</div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="6">
<li>
<p>Delete the WCA-suggested lines of code from <em>Step 4</em> from the Playbook.</p>
<ul>
<li>
<p>Rewrite the description on <strong>Line 12</strong> to the following code block, then press <span class="keys"><kbd class="key-enter">Enter</kbd></span> and <span class="keys"><kbd class="key-tab">Tab</kbd></span> to accept the new WCA code recommendations</p>
</li>
<li>
<p>Take note of the much more precise language used to describe the <code>src</code> and <code>dest</code> variables</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#customizing-__codelineno-4-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file where src equals httpd.j2 and dest equals httpd.config</span><span class="w"></span>
</code></pre></div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="7">
<li>
<p>The resulting WCA-recommended code should be similar to the <code>AI-GENERATED CODE</code> tab below. When compared to the <code>SOLUTION CODE</code> tab:</p>
<ul>
<li>
<p>The <code>src: httpd.j2</code> recommendation in the <code>AI-GENERATED CODE</code> tab is an exact match to the natural language description set in <em>Step 6</em>, and only slightly different (in terms of the directory path used) to the <code>src: /srv/httpd.j2</code> variable in the <code>SOLUTION CODE</code> tab.</p>
</li>
<li>
<p>The <code>dest: /etc/httpd/conf/httpd.conf</code> recommendation in the <code>AI-GENERATED CODE</code> tab, unfortunately, still deviates from the <code>httpd.config</code> (not the same as <code>httpd.conf</code>) destination that was requested in the natural language description. Close, but still far from exact and not matching our specifications. However, it's a vast improvement over the <code>dest: /etc/apache2/sites-available/000-default.conf</code> destination that was recommended as a result of <em>Step 4</em>'s more ambiguous task description.</p>
</li>
<li>
<p>Perplexingly, the <code>mode: '0644'</code> recommendation that was made previously in <em>Step 4</em> has been left out of the suggested task code. We can speculate as to why— perhaps the more precise natural language description made in <em>Step 6</em> prompted WCA to only generate code for exactly what was specified —but the "black box" nature of generative AI means that we cannot know for certain. Perhaps with another, even more precise iteration the <code>AI-GENERATED CODE</code> will match the <code>SOLUTION CODE</code>?</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="customizing-__tabbed_3_1" name="customizing-__tabbed_3" type="radio" /><input id="customizing-__tabbed_3_2" name="customizing-__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="customizing-__tabbed_3_1">AI-GENERATED CODE</label><label for="customizing-__tabbed_3_2">SOLUTION CODE</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-5-1">1</a></span>
<span class="normal"><a href="#customizing-__codelineno-5-2">2</a></span>
<span class="normal"><a href="#customizing-__codelineno-5-3">3</a></span>
<span class="normal"><a href="#customizing-__codelineno-5-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file where src equals httpd.j2 and dest equals httpd.config</span><span class="w"></span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">httpd.j2</span><span class="w"></span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/httpd/conf/httpd.conf</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-6-1">1</a></span>
<span class="normal"><a href="#customizing-__codelineno-6-2">2</a></span>
<span class="normal"><a href="#customizing-__codelineno-6-3">3</a></span>
<span class="normal"><a href="#customizing-__codelineno-6-4">4</a></span>
<span class="normal"><a href="#customizing-__codelineno-6-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file</span><span class="w"></span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/httpd.j2</span><span class="w"></span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/httpd.config</span><span class="w"></span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0644&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="8">
<li>
<p>Iterate on the lessons learned in <em>Step 7</em> and modify the task description to include more details on the permissions applied to the Apache webserver.</p>
<ul>
<li>
<p>Delete the WCA-suggested lines of code from <em>Step 6</em> from the Playbook.</p>
</li>
<li>
<p>Re-write the description on <strong>Line 12</strong> to the following code block, then press <span class="keys"><kbd class="key-enter">Enter</kbd></span> and <span class="keys"><kbd class="key-tab">Tab</kbd></span> to accept the new WCA code recommendations. Take note of the much more precise language used to describe the <code>mode</code> variable.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#customizing-__codelineno-7-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file where src equals httpd.j2 and dest equals httpd.config and mode equals 0644</span><span class="w"></span>
</code></pre></div>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="9">
<li>
<p>Once again, the resulting WCA-recommended code should be similar to the <code>AI-GENERATED CODE</code> tab below. When compared to the <code>SOLUTION CODE</code> tab:</p>
<ul>
<li>
<p>WCA correctly picked up on the <code>mode: '0644'</code> request made in the modified task description. There is now alignment between the two tabs.</p>
</li>
<li>
<p>With only a few iterations and by disambiguating the natural language description of the Ansible Task to be performed, the code recommendations produced by WCA have been markedly improved.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="customizing-__tabbed_4_1" name="customizing-__tabbed_4" type="radio" /><input id="customizing-__tabbed_4_2" name="customizing-__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="customizing-__tabbed_4_1">AI-GENERATED CODE</label><label for="customizing-__tabbed_4_2">SOLUTION CODE</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-8-1">1</a></span>
<span class="normal"><a href="#customizing-__codelineno-8-2">2</a></span>
<span class="normal"><a href="#customizing-__codelineno-8-3">3</a></span>
<span class="normal"><a href="#customizing-__codelineno-8-4">4</a></span>
<span class="normal"><a href="#customizing-__codelineno-8-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file where src equals httpd.j2 and dest equals httpd.config and mode equals 0644</span><span class="w"></span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">httpd.j2</span><span class="w"></span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/httpd/conf/httpd.conf</span><span class="w"></span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-9-1">1</a></span>
<span class="normal"><a href="#customizing-__codelineno-9-2">2</a></span>
<span class="normal"><a href="#customizing-__codelineno-9-3">3</a></span>
<span class="normal"><a href="#customizing-__codelineno-9-4">4</a></span>
<span class="normal"><a href="#customizing-__codelineno-9-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Write the apache config file</span><span class="w"></span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="nt">ansible.builtin.template</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="nt">src</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/srv/httpd.j2</span><span class="w"></span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/etc/httpd.config</span><span class="w"></span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0644&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="customizing-ii-model-customization"><strong>ii. Model customization</strong></h2>
<p>Since every organization is different, WCA allows users to customize the AI model output to your organization's unique Ansible Playbooks. This allows for personalized code recommendations that are a better fit to your business' unique needs and more reflective of the programming standards set within your organization.</p>
<p>In this scenario, your organization has its own set of Ansible Playbooks that leverage your preferred cloud provider, that uses specific Ansible Modules to manage OpenShift clusters.</p>
<hr />
<ol start="10">
<li>
<p>Open the <code>create-openshift-cluster-ibm-cloud.yml</code> Playbook located within the <code>Model Customization</code> subdirectory of the hands-on lab templates. The full directory address, as well as the Playbook code, are encapsulated in the following code block.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:1"><input checked="checked" id="customizing-__tabbed_5_1" name="customizing-__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="customizing-__tabbed_5_1">~/ansible-wca-demo-kit/Model Customization/create-openshift-cluster-ibm-cloud.yml</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-10-1">1</a></span>
<span class="normal"><a href="#customizing-__codelineno-10-2">2</a></span>
<span class="normal"><a href="#customizing-__codelineno-10-3">3</a></span>
<span class="normal"><a href="#customizing-__codelineno-10-4">4</a></span>
<span class="normal"><a href="#customizing-__codelineno-10-5">5</a></span>
<span class="normal"><a href="#customizing-__codelineno-10-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy infrastructure</span><span class="w"></span>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create an OpenShift cluster</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<details class="warning">
<summary>ANSIBLE LIGHTSPEED IS MISSING OR CODE RECOMMENDATIONS ARE NOT GENERATING</summary>
<p>Ansible Lightspeed and WCA will only generate code recommendations for <em>Ansible Playbooks</em> and <em>YAML</em> files. VS Code will typically auto-detect the programming language of the document you're working with, but on occassion you may need to manually specify the language. Even if working with a YAML file, you'll still need to specify the language mode as <code>Ansible</code> for the Lightspeed plugin to engage.</p>
<p>To set the language mode correctly:</p>
<ul>
<li>
<p>In the bottom-right corner of the VS Code interface, hover over the <strong>Select Language Mode</strong> toggle<sup>[A]</sup></p>
</li>
<li>
<p>A console will appear at the top of VS Code with a drop-down list of options<sup>[B]</sup></p>
</li>
<li>
<p>Click <code>Ansible</code> from the suggested languages, or enter the text yourself and hit <span class="keys"><kbd class="key-enter">Enter</kbd></span></p>
</li>
<li>
<p>Confirm that the Select Language Mode toggle in the bottom-right corner displays <code>Ansible</code></p>
</li>
</ul>
<p><br/>
<a class="glightbox" href="../_attachments/troubleshooting-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/troubleshooting-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/troubleshooting-3.png" width="600" /></a></p>
</details>
</li>
</ol>
<hr />
<ol start="11">
<li>
<p>Before performing any model tuning tasks, try generating code recommendations for the OpenShift cluster creation task by placing your cursor at the end of <strong>Line 6</strong>, pressing <span class="keys"><kbd class="key-enter">Enter</kbd></span>, and then accepting the default recommendations by pressing <span class="keys"><kbd class="key-tab">Tab</kbd></span>. The resulting code recommendations— displayed below —represent the standard, unmodified output from WCA's <em>IBM Granite</em> base models.</p>
<ul>
<li>
<p>When using the standard <em>IBM Granite</em> model recommendations, it recommends making use of the <code>ansible.builtin.command</code> Ansible Module — which is a standard, best-practice way to perform these types of deployments.</p>
</li>
<li>
<p>However, <em>your</em> particular organization (and the public cloud provider they use for deploying OpenShift clusters) might require the use of different Ansible Modules. The following steps will explore how to tailor WCA-generated code blocks to the unique needs of a business.</p>
</li>
</ul>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="customizing-__tabbed_6_1" name="customizing-__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="customizing-__tabbed_6_1">STANDARD <em>IBM GRANITE</em> MODEL RECOMMENDATIONS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-11-1"> 1</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-2"> 2</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-3"> 3</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-4"> 4</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-5"> 5</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-6"> 6</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-7"> 7</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-8"> 8</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-9"> 9</a></span>
<span class="normal"><a href="#customizing-__codelineno-11-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy infrastructure</span><span class="w"></span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create an OpenShift cluster</span><span class="w"></span>
<a id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="w">      </span><span class="nt">ansible.builtin.command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oadm create-cluster --wait=false --name=openshift-cluster</span><span class="w"></span>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a><span class="w">      </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oadm_create_cluster</span><span class="w"></span>
<a id="__codelineno-11-9" name="__codelineno-11-9"></a><span class="w">      </span><span class="nt">changed_when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;created&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">oadm_create_cluster.stdout&quot;</span><span class="w"></span>
<a id="__codelineno-11-10" name="__codelineno-11-10"></a><span class="w">      </span><span class="nt">failed_when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;already</span><span class="nv"> </span><span class="s">exists&#39;</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">oadm_create_cluster.stdout&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">DATA PREPARATION &amp; MODEL TRAINING</p>
<p>Given the scope and time available for this hands-on training, <strong>participants will not be manually creating the training data or training models themselves.</strong> Instead, you will utilize a prepared customized model (<code>Model ID</code>) and experiment from <em>Step 12</em> and onwards with how the tuned <code>Model ID</code> impacts WCA's code recommendations.</p>
<ul>
<li>
<p>The process of building Ansible training data and tuning customized models for generative AI is potentially a complex and time-consuming one. </p>
</li>
<li>
<p>For example, the model tuning employed in the steps ahead for the creation of an OpenShift cluster according to an enterprise organization's specific standards requires approximately <strong>4 hours</strong> to train and generate a customized AI model.</p>
</li>
</ul>
<p>In preparation for model tuning, an organization or user can transform their existing Playbooks into training data for WCA using the open-source <strong><a href="https://github.com/ansible/ansible-content-parser" target="_blank">Ansible Parser Tool</a></strong>. The tool analyzes Ansible Playbooks and generates a single <strong>JSONL</strong> (<code>ftdata.jsonl</code> formatted) file that can be uploaded to WCA's model tuning studio for developing customized AI models.</p>
<ul>
<li>
<p>The process of calibrating and running the Ansible Parser Tool is time-consuming and potentially complex, depending on the scope of Playbooks that an organization wishes to analyze and prepare for model tuning. This falls outside the scope of the hands-on material for this training.</p>
</li>
<li>
<p>For the purposes of demonstration, a preconfigured <code>openshift-tune-micro.jsonl</code> was used for the model tuning example.</p>
</li>
</ul>
<p>With the Ansible training data prepared, the <em>IBM watsonx Code Assistant</em> on IBM Cloud service was configured to execute a new model tuning experiment.</p>
<ul>
<li>
<p>WCA provides a graphical user experience<sup>[A]</sup> to streamline the model tuning and customization process</p>
</li>
<li>
<p><strong>Tuning experiment name</strong><sup>[B]</sup> set to <code>Tuning Experiment</code> and confirmed with <strong>Create tuning experiment</strong><sup>[C]</sup></p>
</li>
<li>
<p>The <code>openshift-tune-micro.jsonl</code> training data from Ansible Parser Tool is uploaded into WCA<sup>[D]</sup></p>
</li>
<li>
<p>A summary of metrics— including parameters for sampling and Ansible modules —are displayed within the model tuning wizard before <strong>Start tuning</strong><sup>[E]</sup> is selected to kick off the model tuning operating</p>
</li>
<li>
<p>After the tuning operation has ended, a training loss graph reveals how accurate the model's predictions are over the training data set, across multiple tuning cycles</p>
</li>
<li>
<p>As the number of tuning cycles increase, the training loss rating will tend to decrease</p>
</li>
<li>
<p>Model tuning for these particular metrics and parameters takes approximately <strong>4 hours</strong> to complete</p>
</li>
</ul>
<details class="quote">
<summary>CLICK TO EXPAND — ACCOMPANYING SCREENSHOTS</summary>
<p><br/></p>
<p><a class="glightbox" href="../_attachments/tuning2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/tuning2.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/tuning3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/tuning3.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/tuning4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/tuning4.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/tuning5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/tuning5.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/tuning6.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/tuning6.png" width="600" /></a></p>
</details>
</div>
</li>
</ol>
<hr />
<ol start="12">
<li>
<p>To <strong>override</strong> the <em>IBM Granite</em> base model recommendations, you must provide a pointer to a customized <em>Model ID</em> (prepared and hosted earlier on WCA) using the VS Code extension.</p>
<div class="admonition warning">
<p><strong>Custom Model ID</strong>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#customizing-__codelineno-12-1"></a>b66600aa-cf5d-488f-9144-800f99598829&lt;|sepofid|&gt;c8e09d5f-298c-46f5-9af3-805a02d6da8f
</code></pre></div></p>
</div>
<ul>
<li>
<p>Look for Ansible under the <em>Installed</em> services in the <strong>Extensions</strong> panel.</p>
</li>
<li>
<p>Click the <strong>Manage</strong> ("cogwheel") icon located just to the right of the Ansible tile</p>
</li>
<li>
<p>From the drop-down options, click <strong>Settings</strong><sup>[A]</sup></p>
</li>
<li>
<p>Within the search bar at the top of the panel, add the text <code>Model</code> to filter the results<sup>[B]</sup></p>
</li>
<li>
<p>Copy and paste the <strong>Model ID</strong> value (above) into the empty <code>Ansible &gt; Lightspeed: Model ID Override</code> field<sup>[C]</sup>, then click the <code>X</code> in the top-left corner of the panel to save and exit <em>Settings</em></p>
<p><a class="glightbox" href="../_attachments/setuptroubleshoot-4b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/setuptroubleshoot-4b.png" width="600" /></a></p>
<p><a class="glightbox" href="../_attachments/tuning1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt=""  src="../_attachments/tuning1.png" width="600" /></a></p>
</li>
</ul>
</li>
</ol>
<hr />
<ol start="13">
<li>
<p>With the tuned model, WCA will recommend code using modules, functions, and other details specific to your organization's private IT environment.</p>
<ul>
<li>
<p>Return to the <code>tuning-example.yml</code> Playbook from <em>Step 10</em> and delete the code recommendations generated in <em>Step 11</em></p>
</li>
<li>
<p>Regenerate the code recommendations for the task by placing your cursor at the end of <strong>Line 6</strong>, hitting <span class="keys"><kbd class="key-enter">Enter</kbd></span>, and then <span class="keys"><kbd class="key-tab">Tab</kbd></span></p>
</li>
<li>
<p>Observe how the tuned <em>Model ID</em> has modified WCA's code recommendations by toggling between the <code>TUNED MODEL</code> and <code>STANDARD MODEL</code> tabs below</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="customizing-__tabbed_7_1" name="customizing-__tabbed_7" type="radio" /><input id="customizing-__tabbed_7_2" name="customizing-__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="customizing-__tabbed_7_1">TUNED MODEL</label><label for="customizing-__tabbed_7_2">STANDARD MODEL</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-10">10</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-11">11</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-12">12</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-13">13</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-14">14</a></span>
<span class="normal"><a href="#customizing-__codelineno-13-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create an OpenShift cluster</span><span class="w"></span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">community.vmware.vmware_container_cluster</span><span class="p p-Indicator">:</span><span class="w"></span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-0001</span><span class="w"></span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">        </span><span class="nt">zone</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xxxx-xxxx-xxxx</span><span class="w"></span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">        </span><span class="nt">network</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xxxx-xxxx-xxxx</span><span class="w"></span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">        </span><span class="nt">os_type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Linux</span><span class="w"></span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">        </span><span class="nt">datastore</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">datastore-001</span><span class="w"></span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">        </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Standard</span><span class="w"></span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">        </span><span class="nt">enable_auto_scaling</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">        </span><span class="nt">enable_ip_forwarding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">        </span><span class="nt">enable_auto_security_groups</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">  </span><span class="w w-Error">  </span><span class="nt">auto_security_groups</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">cluster-001-sg-001</span><span class="w"></span>
<a id="__codelineno-13-15" name="__codelineno-13-15"></a><span class="w">            </span><span class="l l-Scalar l-Scalar-Plain">id</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sg-001</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#customizing-__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#customizing-__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="nn">---</span><span class="w"></span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Deploy infrastructure</span><span class="w"></span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">all</span><span class="w"></span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create an OpenShift cluster</span><span class="w"></span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="nt">ansible.builtin.command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oadm create-cluster --wait=false --name=openshift-cluster</span><span class="w"></span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="nt">register</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">oadm_create_cluster</span><span class="w"></span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="w">    </span><span class="nt">changed_when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;created&#39;</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">oadm_create_cluster.stdout&quot;</span><span class="w"></span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="w">    </span><span class="nt">failed_when</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&#39;already</span><span class="nv"> </span><span class="s">exists&#39;</span><span class="nv"> </span><span class="s">not</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">oadm_create_cluster.stdout&quot;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
</li>
</ul>
</li>
</ol>
<hr />
<p>Using the tuned <em>Model ID</em>, WCA has returned a recommendation to use the <code>ibm.cloudcollection.ibm_container_cluster</code> Module for the IBM Cloud, instead of the standard <code>ansible.builtin.command</code> Module from <em>Step 11</em>. This more accurately conforms to the organization's Ansible automation standards and requirements.</p>
<div class="admonition warning">
<p class="admonition-title">REMOVE THE CUSTOMIZED <em>MODEL ID</em> WHEN FINISHED</p>
<p>Remember to <strong>clear</strong> the <code>Ansible &gt; Lightspeed: Model ID Override</code> in the <em>Settings</em> after you have completed <em>Step 13</em>, otherwise all subsequent code generation requests made to WCA will be produced using the tuned AI model.</p>
</div>
<hr />
<h2 id="customizing-iii-conclusion"><strong>iii. Conclusion</strong></h2>
<p>This concludes the hands-on components of the Level 3 course, but your learning and experimentation doesn't need to end here. Participants are encouraged to follow the <a href="https://ibm.github.io/WCA-AnsibleLightspeed-L3/evaluation/" target="_blank">Level 3 accreditation</a> steps (depending on your role).</p></section></div>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023-2024 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "/", "features": ["navigation.instant", "navigation.tracking", "content.code.annotate", "content.code.copy", "content.code.select", "navigation.footer"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>